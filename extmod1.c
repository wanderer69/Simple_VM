//---------------------------------------------------------------------------
#define ARCHITECT16 1

//#define _DEBUG_ 1

#include <stdarg.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>


#include "MEMMAN.h"
#include "objects.h"
#include "vm.h"

#include "print.h"

#ifdef __BORLANDC__
#pragma hdrstop
#endif

//---------------------------------------------------------------------------
#ifdef __BORLANDC__
#pragma argsused
#endif

#ifndef __BORLANDC__
#ifndef __LINUX
#define printf uart0Puts
#endif
#endif

// нова€ кодова€ машина LISP
// смысл заключаетс€ в трансл€ции слов в код.
// фактически все функции имеют коды

#define EXTFUNC(p)  int p()

//#define _DEBUG 1


// если файлы хран€тс€ во флеше
#define USE_FLASH_FS 1
#ifdef USE_FLASH_FS
#include "../lib/periph.h"
#endif

char *buffer;

void function_tuple(void)
{
// библиотечные функции
unsigned char tuple_lib[] = {
0x46,0x43,0x00,0x01,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x06,0x00,0x00,
0x00,0x74,0x75,0x70,0x6c,0x65,0x00,0x0b,0x00,0x00,0x00,0x04,0x03,0x70,0x31,
0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,0xff,
0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x17,0x00,0x00,0x00,
0x00,0x3c,0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x09,0x00,
0x00,0x00,0x72,0x73,0x7a,0x74,0x75,0x70,0x6c,0x65,0x00,0x0a,0x00,0x00,0x00,
0x04,0x03,0x70,0x31,0x00,0x04,0x03,0x6c,0x31,0x00,0x12,0x00,0x00,0x00,0x04,
0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x17,
0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x99,0x55,0x09,0x00,0x00,0x00,
0x73,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x0f,0x00,0x00,0x00,0x04,0x03,
0x70,0x31,0x00,0x04,0x03,0x6c,0x31,0x00,0x04,0x03,0x76,0x31,0x00,0x1b,0x00,
0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x17,0x00,0x00,0x00,
0x00,0x17,0x01,0x00,0x00,0x00,0x17,0x02,0x00,0x00,0x00,0x3e,0x55,0x09,0x00,
0x00,0x00,0x67,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x0a,0x00,0x00,0x00,
0x04,0x03,0x70,0x31,0x00,0x04,0x03,0x6c,0x31,0x00,0x12,0x00,0x00,0x00,0x04,
0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x17,
0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x3f,0x55,0x09,0x00,0x00,0x00,
0x6c,0x65,0x6e,0x74,0x75,0x70,0x6c,0x65,0x00,0x05,0x00,0x00,0x00,0x04,0x03,
0x70,0x31,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x17,0x00,
0x00,0x00,0x00,0x41,0x55,0x0a,0x00,0x00,0x00,0x63,0x6f,0x70,0x79,0x74,0x75,
0x70,0x6c,0x65,0x00,0x70,0x00,0x00,0x00,0x04,0x03,0x70,0x31,0x00,0x04,0x02,
0x70,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x09,0x6c,0x65,0x6e,0x74,0x75,
0x70,0x6c,0x65,0x00,0x04,0x06,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x67,
0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x73,0x65,0x74,0x74,0x75,
0x70,0x6c,0x65,0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x31,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,
0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x12,0x00,
0x00,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x14,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x04,
0x04,0x00,0x00,0x00,0x04,0x05,0x00,0x00,0x00,0x04,0x06,0x00,0x00,0x00,0x82,
0x00,0x00,0x00,0x78,0x78,0x17,0x00,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,
0x79,0x01,0x00,0x00,0x00,0x14,0x01,0x00,0x00,0x00,0x0b,0x07,0x00,0x00,0x00,
0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,
0x00,0x79,0x00,0x00,0x00,0x00,0x7d,0x51,0x3c,0x00,0x00,0x00,0x0c,0x7b,0x7c,
0x00,0x00,0x00,0x0c,0x0b,0x08,0x00,0x00,0x00,0x78,0x15,0x01,0x00,0x00,0x00,
0x15,0x00,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,
0x00,0x79,0x02,0x00,0x00,0x00,0x79,0x03,0x00,0x00,0x00,0x15,0x00,0x00,0x00,
0x00,0x0b,0x09,0x00,0x00,0x00,0x1f,0x14,0x00,0x00,0x00,0x00,0xa7,0x0a,0x00,
0x00,0x00,0x7b,0x20,0x00,0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x55
};

    buffer=tuple_lib;
    load_function_string(buffer,"tuple_lib.obl");

};

void function_list_map(void)
{
const unsigned char list_map_lib[] = {
0x46,0x43,0x00,0x01,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x05,0x00,0x00,
0x00,0x6c,0x69,0x73,0x74,0x00,0x67,0x00,0x00,0x00,0x04,0x0e,0x5f,0x73,0x79,
0x73,0x5f,0x61,0x72,0x67,0x5f,0x6c,0x69,0x73,0x74,0x00,0x04,0x03,0x6e,0x61,
0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x02,0x76,0x00,0x04,0x04,0x6e,0x69,0x6c,
0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x05,
0x6c,0x69,0x73,0x74,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x01,0x01,0x00,0x00,
0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x01,0x01,0x00,0x00,0x00,0x01,0x01,0x00,
0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x01,0x01,
0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x1b,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,
0x02,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x04,0x05,
0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x04,0x07,0x00,0x00,
0x00,0x3a,0x01,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x89,0x25,0x00,0x00,0x00,
0x15,0x00,0x00,0x00,0x00,0x53,0x1f,0x00,0x00,0x00,0x0c,0x0b,0x08,0x00,0x00,
0x00,0x7b,0x4d,0x00,0x00,0x00,0x0c,0x7b,0x4d,0x00,0x00,0x00,0xa9,0x0b,0x09,
0x00,0x00,0x00,0x7d,0x51,0x42,0x00,0x00,0x00,0x0c,0x17,0x00,0x00,0x00,0x00,
0x15,0x00,0x00,0x00,0x00,0x3f,0x7b,0x4d,0x00,0x00,0x00,0x0c,0x17,0x00,0x00,
0x00,0x00,0x7b,0x0a,0x00,0x00,0x00,0x14,0x01,0x00,0x00,0x00,0x15,0x01,0x00,
0x00,0x00,0x52,0xdb,0x00,0x00,0x00,0x0c,0x78,0x00,0x17,0x00,0x00,0x00,0x00,
0x89,0x84,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x53,0x7e,0x00,0x00,0x00,
0x0c,0x0b,0x0a,0x00,0x00,0x00,0x7b,0xac,0x00,0x00,0x00,0x0c,0x7b,0xac,0x00,
0x00,0x00,0xa9,0x0b,0x0b,0x00,0x00,0x00,0x7d,0x51,0xa1,0x00,0x00,0x00,0x0c,
0x17,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x3f,0x7b,0xac,0x00,0x00,
0x00,0x0c,0x17,0x00,0x00,0x00,0x00,0x7b,0x69,0x00,0x00,0x00,0x14,0x01,0x00,
0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x52,0xd0,0x00,0x00,0x00,0x15,0x00,0x00,
0x00,0x00,0x0b,0x0c,0x00,0x00,0x00,0x1f,0x14,0x00,0x00,0x00,0x00,0x7b,0x5e,
0x00,0x00,0x00,0x0c,0x79,0x00,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x00,
0x17,0x00,0x00,0x00,0x00,0x89,0x01,0x01,0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,
0x53,0xfb,0x00,0x00,0x00,0x0c,0x0b,0x0e,0x00,0x00,0x00,0x7b,0x29,0x01,0x00,
0x00,0x0c,0x7b,0x29,0x01,0x00,0x00,0xa9,0x0b,0x0f,0x00,0x00,0x00,0x7d,0x51,
0x1e,0x01,0x00,0x00,0x0c,0x17,0x00,0x00,0x00,0x00,0x0b,0x10,0x00,0x00,0x00,
0x3f,0x7b,0x29,0x01,0x00,0x00,0x0c,0x17,0x00,0x00,0x00,0x00,0x7b,0xe6,0x00,
0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x32,0x14,0x02,0x00,0x00,0x00,0x15,0x02,
0x00,0x00,0x00,0x55,0x07,0x00,0x00,0x00,0x6d,0x61,0x70,0x63,0x61,0x72,0x00,
0x28,0x01,0x00,0x00,0x04,0x09,0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e,0x00,
0x04,0x0e,0x5f,0x73,0x79,0x73,0x5f,0x61,0x72,0x67,0x5f,0x6c,0x69,0x73,0x74,
0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x76,0x61,0x6c,0x75,0x65,0x00,
0x04,0x03,0x6e,0x61,0x00,0x04,0x02,0x6e,0x00,0x04,0x0a,0x66,0x75,0x6e,0x63,
0x74,0x69,0x6f,0x6e,0x70,0x00,0x04,0x06,0x70,0x72,0x69,0x6e,0x74,0x00,0x04,
0x11,0x67,0x65,0x74,0x5f,0x66,0x75,0x6e,0x63,0x5f,0x6e,0x75,0x6d,0x5f,0x61,
0x72,0x67,0x00,0x04,0x07,0x6d,0x61,0x70,0x63,0x61,0x72,0x00,0x04,0x05,0x6c,
0x69,0x73,0x74,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,
0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x03,0x1f,0x00,
0x00,0x00,0x54,0x68,0x69,0x73,0x20,0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e,
0x20,0x69,0x73,0x20,0x6e,0x6f,0x74,0x20,0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,
0x6e,0x21,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x04,0x15,0x2a,0x2a,
0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x32,0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,
0x01,0x01,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,
0x04,0x04,0x6e,0x69,0x6c,0x00,0x01,0x01,0x00,0x00,0x00,0x01,0x01,0x00,0x00,
0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x01,0x01,0x00,
0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x00,
0x12,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x24,0x00,0x00,0x00,0x04,0x02,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,
0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x05,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x19,0x00,0x00,0x00,0x04,0x06,0x00,0x00,0x00,0x04,0x07,0x00,0x00,
0x00,0x04,0x08,0x00,0x00,0x00,0x04,0x09,0x00,0x00,0x00,0x04,0x0a,0x00,0x00,
0x00,0x22,0x02,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x79,0x00,0x00,0x00,
0x00,0x9b,0x51,0x31,0x00,0x00,0x00,0x0c,0x0b,0x0b,0x00,0x00,0x00,0x78,0x0b,
0x0c,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0xa2,0x01,0x00,0x00,0x00,0xa7,
0x0d,0x00,0x00,0x00,0x7b,0x1c,0x02,0x00,0x00,0x0b,0x0e,0x00,0x00,0x00,0x78,
0x17,0x00,0x00,0x00,0x00,0x79,0x02,0x00,0x00,0x00,0x14,0x03,0x00,0x00,0x00,
0x78,0x78,0x0b,0x0f,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x00,0x15,0x02,
0x00,0x00,0x00,0x15,0x03,0x00,0x00,0x00,0x20,0x53,0xdb,0x00,0x00,0x00,0x0c,
0x17,0x01,0x00,0x00,0x00,0x89,0x89,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,
0x53,0x83,0x00,0x00,0x00,0x0c,0x0b,0x10,0x00,0x00,0x00,0x7b,0xb1,0x00,0x00,
0x00,0x0c,0x7b,0xb1,0x00,0x00,0x00,0xa9,0x0b,0x11,0x00,0x00,0x00,0x7d,0x51,
0xa6,0x00,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,
0x3f,0x7b,0xb1,0x00,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x7b,0x6e,0x00,
0x00,0x00,0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x33,0x14,0x01,
0x00,0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x0b,0x12,
0x00,0x00,0x00,0x1f,0x14,0x02,0x00,0x00,0x00,0x7b,0x52,0x00,0x00,0x00,0x00,
0x0c,0x17,0x00,0x00,0x00,0x00,0x9d,0x0b,0x13,0x00,0x00,0x00,0x14,0x02,0x00,
0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x15,0x03,0x00,0x00,0x00,0x20,0x53,0x71,
0x01,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x89,0x23,0x01,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x53,0x1d,0x01,0x00,0x00,0x0c,0x0b,0x14,0x00,0x00,0x00,
0x7b,0x4b,0x01,0x00,0x00,0x0c,0x7b,0x4b,0x01,0x00,0x00,0xa9,0x0b,0x15,0x00,
0x00,0x00,0x7d,0x51,0x40,0x01,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x3f,0x7b,0x4b,0x01,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,
0x00,0x7b,0x08,0x01,0x00,0x00,0x34,0x14,0x01,0x00,0x00,0x00,0x15,0x01,0x00,
0x00,0x00,0x52,0x0c,0x02,0x00,0x00,0x0c,0x15,0x02,0x00,0x00,0x00,0x0b,0x16,
0x00,0x00,0x00,0x1f,0x14,0x02,0x00,0x00,0x00,0x7b,0xed,0x00,0x00,0x00,0x0c,
0x78,0x17,0x00,0x00,0x00,0x00,0x0b,0x17,0x00,0x00,0x00,0x14,0x02,0x00,0x00,
0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x15,0x03,0x00,0x00,0x00,0x20,0x53,0x01,
0x02,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x89,0xb9,0x01,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x53,0xb3,0x01,0x00,0x00,0x0c,0x0b,0x18,0x00,0x00,0x00,
0x7b,0xe1,0x01,0x00,0x00,0x0c,0x7b,0xe1,0x01,0x00,0x00,0xa9,0x0b,0x19,0x00,
0x00,0x00,0x7d,0x51,0xd6,0x01,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x3f,0x7b,0xe1,0x01,0x00,0x00,0x0c,0x17,0x01,0x00,0x00,
0x00,0x7b,0x9e,0x01,0x00,0x00,0x34,0x14,0x01,0x00,0x00,0x00,0x15,0x01,0x00,
0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x0b,0x1a,0x00,0x00,0x00,0x1f,0x14,0x02,
0x00,0x00,0x00,0x7b,0x82,0x01,0x00,0x00,0x0c,0x79,0x03,0x00,0x00,0x00,0x7b,
0x0d,0x02,0x00,0x00,0x0c,0x79,0x04,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,
0xa7,0x1b,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55
};
    buffer=list_map_lib;
    load_function_string(buffer,"list_map_lib.obl");
};

void function_predic(void)
{
const unsigned char predic_lib[] = {
0x46,0x43,0x00,0x01,0x00,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x06,0x00,0x00,
0x00,0x61,0x74,0x6f,0x6d,0x70,0x00,0x19,0x00,0x00,0x00,0x04,0x02,0x78,0x00,
0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x05,0x74,0x72,0x75,0x65,0x00,0x04,0x06,
0x66,0x61,0x6c,0x73,0x65,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,
0x88,0x1f,0x00,0x00,0x00,0x89,0x1f,0x00,0x00,0x00,0x0c,0x0b,0x02,0x00,0x00,
0x00,0x14,0x00,0x00,0x00,0x00,0x7b,0x2a,0x00,0x00,0x00,0x0c,0x0b,0x03,0x00,
0x00,0x00,0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x08,0x00,
0x00,0x00,0x6e,0x75,0x6d,0x62,0x65,0x72,0x70,0x00,0x19,0x00,0x00,0x00,0x04,
0x02,0x78,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x66,0x61,0x6c,0x73,
0x65,0x00,0x04,0x05,0x74,0x72,0x75,0x65,0x00,0x09,0x00,0x00,0x00,0x04,0x00,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x2b,0x00,0x00,0x00,0x17,0x00,
0x00,0x00,0x00,0x84,0x1a,0x00,0x00,0x00,0x0c,0x0b,0x02,0x00,0x00,0x00,0x14,
0x00,0x00,0x00,0x00,0x7b,0x25,0x00,0x00,0x00,0x0c,0x0b,0x03,0x00,0x00,0x00,
0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x0a,0x00,0x00,0x00,
0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e,0x70,0x00,0x4d,0x00,0x00,0x00,0x04,
0x02,0x70,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x66,0x61,0x6c,0x73,
0x65,0x00,0x04,0x02,0x73,0x00,0x04,0x02,0x74,0x00,0x01,0x1f,0x00,0x00,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,
0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x1b,
0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x04,0x03,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x00,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0xa8,0x14,
0x02,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x0b,0x05,0x00,0x00,0x00,0x7d,
0x51,0x35,0x00,0x00,0x00,0x0c,0x0b,0x06,0x00,0x00,0x00,0x17,0x00,0x00,0x00,
0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x07,0x00,0x00,0x00,0x7b,0x36,0x00,0x00,
0x00,0x0c,0x15,0x00,0x00,0x00,0x00,0x55,0x06,0x00,0x00,0x00,0x65,0x71,0x75,
0x61,0x6c,0x00,0xa8,0x01,0x00,0x00,0x04,0x03,0x6c,0x31,0x00,0x04,0x03,0x6c,
0x32,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x61,0x74,0x6f,0x6d,0x70,
0x00,0x04,0x06,0x65,0x71,0x75,0x61,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x34,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x32,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x00,0x04,0x06,0x66,0x61,
0x6c,0x73,0x65,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,
0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x00,0x04,0x15,0x2a,
0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x34,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,
0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x39,0x00,0x04,0x15,
0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x35,0x00,0x04,0x06,0x66,0x61,0x6c,0x73,0x65,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x38,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x36,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x36,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x37,0x00,0x04,0x06,0x66,0x61,0x6c,0x73,
0x65,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x37,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x38,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x39,0x00,0x12,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,
0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x0a,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,
0xfa,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,
0x51,0x64,0x00,0x00,0x00,0x0c,0x0b,0x05,0x00,0x00,0x00,0x78,0x17,0x01,0x00,
0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x51,0x46,0x00,0x00,0x00,0x0c,0x0b,0x06,
0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x7d,0x14,
0x00,0x00,0x00,0x00,0xa7,0x07,0x00,0x00,0x00,0x7b,0x5a,0x00,0x00,0x00,0x0b,
0x08,0x00,0x00,0x00,0x0b,0x09,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,
0x0a,0x00,0x00,0x00,0xa7,0x0b,0x00,0x00,0x00,0x7b,0xf4,0x00,0x00,0x00,0x0b,
0x0c,0x00,0x00,0x00,0x78,0x17,0x01,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,
0x51,0x93,0x00,0x00,0x00,0x0c,0x0b,0x0d,0x00,0x00,0x00,0x0b,0x0e,0x00,0x00,
0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x0f,0x00,0x00,0x00,0x7b,0xef,0x00,0x00,
0x00,0x0b,0x10,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x33,0x17,0x01,
0x00,0x00,0x00,0x33,0x79,0x01,0x00,0x00,0x00,0x51,0xd6,0x00,0x00,0x00,0x0c,
0x0b,0x11,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x34,0x17,0x01,0x00,
0x00,0x00,0x34,0x79,0x01,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x12,
0x00,0x00,0x00,0x7b,0xea,0x00,0x00,0x00,0x0b,0x13,0x00,0x00,0x00,0x0b,0x14,
0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x15,0x00,0x00,0x00,0xa7,0x16,
0x00,0x00,0x00,0xa7,0x17,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x06,
0x00,0x00,0x00,0x6c,0x69,0x73,0x74,0x70,0x00,0x19,0x00,0x00,0x00,0x04,0x02,
0x78,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x66,0x61,0x6c,0x73,0x65,
0x00,0x04,0x05,0x74,0x72,0x75,0x65,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x17,0x00,0x00,
0x00,0x00,0x88,0x1a,0x00,0x00,0x00,0x0c,0x0b,0x02,0x00,0x00,0x00,0x14,0x00,
0x00,0x00,0x00,0x7b,0x25,0x00,0x00,0x00,0x0c,0x0b,0x03,0x00,0x00,0x00,0x14,
0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55
};

    buffer=predic_lib;
    load_function_string(buffer,"predic_lib.obl");
};

void function_list_func(void)
{
const unsigned char list_func_lib[] = {
0x46,0x43,0x00,0x01,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x08,0x00,0x00,
0x00,0x72,0x65,0x76,0x65,0x72,0x73,0x65,0x00,0x85,0x00,0x00,0x00,0x04,0x02,
0x4c,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x08,0x72,0x65,0x76,0x65,0x72,
0x73,0x65,0x00,0x04,0x07,0x61,0x70,0x70,0x65,0x6e,0x64,0x00,0x04,0x04,0x6e,
0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x04,0x15,0x2a,0x2a,
0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x31,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,
0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x00,0x04,0x04,0x6e,
0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x00,0x09,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x0a,0x00,0x00,0x00,0x04,0x02,0x00,0x00,
0x00,0x04,0x03,0x00,0x00,0x00,0x5d,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,
0x0b,0x04,0x00,0x00,0x00,0x7d,0x51,0x2a,0x00,0x00,0x00,0x0c,0x0b,0x05,0x00,
0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x06,0x00,
0x00,0x00,0x7b,0x57,0x00,0x00,0x00,0x0b,0x07,0x00,0x00,0x00,0x78,0x78,0x17,
0x00,0x00,0x00,0x00,0x34,0x79,0x00,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,
0x33,0x0b,0x08,0x00,0x00,0x00,0x32,0x79,0x01,0x00,0x00,0x00,0x14,0x00,0x00,
0x00,0x00,0xa7,0x09,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x0b,0x00,
0x00,0x00,0x72,0x65,0x6d,0x6f,0x76,0x65,0x6c,0x61,0x73,0x74,0x00,0x7f,0x00,
0x00,0x00,0x04,0x02,0x4c,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x0b,0x72,
0x65,0x6d,0x6f,0x76,0x65,0x6c,0x61,0x73,0x74,0x00,0x04,0x04,0x6e,0x69,0x6c,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x34,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x34,0x00,0x09,0x00,0x00,0x00,0x04,0x00,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x05,0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0x53,
0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x34,0x0b,0x03,0x00,0x00,0x00,0x7d,
0x51,0x2b,0x00,0x00,0x00,0x0c,0x0b,0x04,0x00,0x00,0x00,0x0b,0x05,0x00,0x00,
0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x06,0x00,0x00,0x00,0x7b,0x4d,0x00,0x00,
0x00,0x0b,0x07,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x33,0x78,0x17,0x00,
0x00,0x00,0x00,0x34,0x79,0x00,0x00,0x00,0x00,0x32,0x14,0x00,0x00,0x00,0x00,
0xa7,0x08,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x05,0x00,0x00,0x00,
0x6c,0x61,0x73,0x74,0x00,0x73,0x00,0x00,0x00,0x04,0x02,0x4c,0x00,0x04,0x04,
0x72,0x65,0x74,0x00,0x04,0x05,0x6c,0x61,0x73,0x74,0x00,0x04,0x04,0x6e,0x69,
0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x36,0x00,0x04,0x15,0x2a,0x2a,
0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x36,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x05,0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0x4d,0x00,0x00,0x00,0x17,0x00,
0x00,0x00,0x00,0x34,0x0b,0x03,0x00,0x00,0x00,0x7d,0x51,0x2c,0x00,0x00,0x00,
0x0c,0x0b,0x04,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x33,0x14,0x00,0x00,
0x00,0x00,0xa7,0x05,0x00,0x00,0x00,0x7b,0x47,0x00,0x00,0x00,0x0b,0x06,0x00,
0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x34,0x79,0x00,0x00,0x00,0x00,0x14,
0x00,0x00,0x00,0x00,0xa7,0x07,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,
0x07,0x00,0x00,0x00,0x61,0x70,0x70,0x65,0x6e,0x64,0x00,0x8f,0x00,0x00,0x00,
0x04,0x03,0x4c,0x31,0x00,0x04,0x03,0x4c,0x32,0x00,0x04,0x04,0x72,0x65,0x74,
0x00,0x04,0x0b,0x72,0x65,0x6d,0x6f,0x76,0x65,0x6c,0x61,0x73,0x74,0x00,0x04,
0x05,0x6c,0x61,0x73,0x74,0x00,0x04,0x07,0x61,0x70,0x70,0x65,0x6e,0x64,0x00,
0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x37,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x37,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x38,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x38,0x00,0x12,0x00,0x00,0x00,0x04,0x00,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x09,0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x0f,0x00,
0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x04,0x05,0x00,
0x00,0x00,0x61,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x0b,0x06,0x00,0x00,
0x00,0x7d,0x51,0x2a,0x00,0x00,0x00,0x0c,0x0b,0x07,0x00,0x00,0x00,0x17,0x01,
0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x08,0x00,0x00,0x00,0x7b,0x5b,
0x00,0x00,0x00,0x0b,0x09,0x00,0x00,0x00,0x78,0x78,0x17,0x00,0x00,0x00,0x00,
0x79,0x00,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x79,0x01,0x00,0x00,
0x00,0x17,0x01,0x00,0x00,0x00,0x32,0x79,0x02,0x00,0x00,0x00,0x14,0x00,0x00,
0x00,0x00,0xa7,0x0a,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x07,0x00,
0x00,0x00,0x64,0x65,0x6c,0x65,0x74,0x65,0x00,0x2f,0x02,0x00,0x00,0x04,0x05,
0x69,0x74,0x65,0x6d,0x00,0x04,0x05,0x6c,0x69,0x73,0x74,0x00,0x04,0x06,0x63,
0x6f,0x75,0x6e,0x74,0x00,0x04,0x02,0x6a,0x00,0x04,0x02,0x69,0x00,0x04,0x02,
0x62,0x00,0x04,0x02,0x63,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x65,
0x71,0x75,0x61,0x6c,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,
0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x39,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x39,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x38,0x00,0x01,0x00,0x00,0x00,
0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x30,0x00,
0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,
0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x30,0x00,0x04,0x15,
0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x31,0x31,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x31,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x31,0x32,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x32,0x00,
0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x33,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x31,0x33,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x35,0x00,
0x04,0x06,0x66,0x61,0x6c,0x73,0x65,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x34,
0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x34,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x31,0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x36,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x31,0x36,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x37,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x37,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,
0x38,0x00,0x1b,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,0x00,0x00,0x00,0xff,
0xff,0xff,0x00,0x2d,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x04,0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x05,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x04,0x06,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x07,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x05,0x00,0x00,0x00,0x04,0x08,0x00,0x00,
0x00,0x65,0x01,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x0b,0x09,0x00,0x00,0x00,
0x7d,0x51,0x2a,0x00,0x00,0x00,0x0c,0x0b,0x0a,0x00,0x00,0x00,0x0b,0x0b,0x00,
0x00,0x00,0x14,0x04,0x00,0x00,0x00,0xa7,0x0c,0x00,0x00,0x00,0x7b,0x5f,0x01,
0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x14,0x02,0x00,
0x00,0x00,0x0b,0x0e,0x00,0x00,0x00,0x14,0x01,0x00,0x00,0x00,0x17,0x02,0x00,
0x00,0x00,0x0b,0x0f,0x00,0x00,0x00,0x7d,0x51,0x6e,0x00,0x00,0x00,0x0c,0x0b,
0x10,0x00,0x00,0x00,0x0b,0x11,0x00,0x00,0x00,0x9f,0x14,0x00,0x00,0x00,0x00,
0xa7,0x12,0x00,0x00,0x00,0x7b,0x82,0x00,0x00,0x00,0x0b,0x13,0x00,0x00,0x00,
0x17,0x02,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x14,0x00,0x00,0x00,
0x0b,0x15,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x34,0x14,0x03,0x00,0x00,
0x00,0xa7,0x16,0x00,0x00,0x00,0x15,0x03,0x00,0x00,0x00,0x0b,0x17,0x00,0x00,
0x00,0x7d,0x51,0xc1,0x00,0x00,0x00,0x0c,0x0b,0x18,0x00,0x00,0x00,0x17,0x01,
0x00,0x00,0x00,0x14,0x04,0x00,0x00,0x00,0xa7,0x19,0x00,0x00,0x00,0x7b,0x5a,
0x01,0x00,0x00,0x0c,0x0b,0x1a,0x00,0x00,0x00,0x78,0x15,0x03,0x00,0x00,0x00,
0x33,0x17,0x00,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x0b,0x1b,0x00,0x00,
0x00,0x7d,0x9b,0x51,0x10,0x01,0x00,0x00,0x0c,0x0b,0x1c,0x00,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x15,0x03,0x00,0x00,0x00,0x34,0x36,0x15,0x01,0x00,0x00,
0x00,0x0b,0x1d,0x00,0x00,0x00,0x1f,0x14,0x01,0x00,0x00,0x00,0xa7,0x1e,0x00,
0x00,0x00,0x7b,0x11,0x01,0x00,0x00,0x0c,0xa7,0x1f,0x00,0x00,0x00,0x15,0x01,
0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x7d,0x51,0x40,0x01,0x00,0x00,0x0c,
0x0b,0x20,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x14,0x04,0x00,0x00,0x00,
0xa7,0x21,0x00,0x00,0x00,0x7b,0x5a,0x01,0x00,0x00,0x0c,0x0b,0x22,0x00,0x00,
0x00,0x15,0x03,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0xa7,0x23,0x00,0x00,
0x00,0x7b,0x82,0x00,0x00,0x00,0xa7,0x24,0x00,0x00,0x00,0x15,0x04,0x00,0x00,
0x00,0x55,0x08,0x00,0x00,0x00,0x70,0x61,0x69,0x72,0x6c,0x69,0x73,0x00,0x8e,
0x00,0x00,0x00,0x04,0x06,0xea,0xeb,0xfe,0xf7,0xe8,0x00,0x04,0x07,0xe4,0xe0,
0xed,0xed,0xfb,0xe5,0x00,0x04,0x09,0xe0,0x5f,0xf1,0xef,0xe8,0xf1,0xee,0xea,
0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x08,0x70,0x61,0x69,0x72,0x6c,0x69,
0x73,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x39,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x39,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,
0x30,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x30,0x00,0x1b,0x00,0x00,0x00,0x04,
0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,
0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x05,0x00,0x00,0x00,0x04,0x04,
0x00,0x00,0x00,0x64,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x0b,0x05,0x00,
0x00,0x00,0x7d,0x51,0x2a,0x00,0x00,0x00,0x0c,0x0b,0x06,0x00,0x00,0x00,0x17,
0x02,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x07,0x00,0x00,0x00,0x7b,
0x5e,0x00,0x00,0x00,0x0b,0x08,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x33,
0x17,0x01,0x00,0x00,0x00,0x33,0x32,0x78,0x17,0x00,0x00,0x00,0x00,0x34,0x17,
0x01,0x00,0x00,0x00,0x34,0x17,0x02,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,
0x32,0x14,0x00,0x00,0x00,0x00,0xa7,0x09,0x00,0x00,0x00,0x15,0x00,0x00,0x00,
0x00,0x55,0x06,0x00,0x00,0x00,0x61,0x73,0x73,0x6f,0x63,0x00,0xb3,0x00,0x00,
0x00,0x04,0x02,0xe0,0x00,0x04,0x09,0xe0,0x5f,0xf1,0xef,0xe8,0xf1,0xee,0xea,
0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x61,0x73,0x73,0x6f,0x63,0x00,
0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x31,0x00,0x04,
0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,
0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x31,0x00,0x04,0x15,
0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x32,0x32,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x32,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x32,0x33,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x33,0x00,
0x12,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x02,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x05,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x7f,
0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x0b,0x04,0x00,0x00,0x00,0x7d,0x51,
0x2a,0x00,0x00,0x00,0x0c,0x0b,0x05,0x00,0x00,0x00,0x0b,0x06,0x00,0x00,0x00,
0x14,0x00,0x00,0x00,0x00,0xa7,0x07,0x00,0x00,0x00,0x7b,0x79,0x00,0x00,0x00,
0x0c,0x17,0x01,0x00,0x00,0x00,0x33,0x33,0x17,0x00,0x00,0x00,0x00,0x7d,0x51,
0x58,0x00,0x00,0x00,0x0c,0x0b,0x08,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,
0x33,0x14,0x00,0x00,0x00,0x00,0xa7,0x09,0x00,0x00,0x00,0x7b,0x79,0x00,0x00,
0x00,0x0c,0x0b,0x0a,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x17,0x01,
0x00,0x00,0x00,0x34,0x79,0x00,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,
0x0b,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x09,0x00,0x00,0x00,0x70,
0x75,0x74,0x61,0x73,0x73,0x6f,0x63,0x00,0xf6,0x00,0x00,0x00,0x04,0x05,0xea,
0xeb,0xfe,0xf7,0x00,0x04,0x07,0xe4,0xe0,0xed,0xed,0xfb,0xe5,0x00,0x04,0x09,
0xe0,0x5f,0xf1,0xef,0xe8,0xf1,0xee,0xea,0x00,0x04,0x04,0x72,0x65,0x74,0x00,
0x04,0x09,0x70,0x75,0x74,0x61,0x73,0x73,0x6f,0x63,0x00,0x04,0x04,0x6e,0x69,
0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x34,0x00,0x04,0x04,0x6e,0x69,0x6c,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x34,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,
0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x35,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x32,0x36,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,
0x36,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x37,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x32,0x37,0x00,0x1b,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x09,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x05,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0xcc,0x00,0x00,0x00,
0x17,0x02,0x00,0x00,0x00,0x0b,0x05,0x00,0x00,0x00,0x7d,0x51,0x2a,0x00,0x00,
0x00,0x0c,0x0b,0x06,0x00,0x00,0x00,0x0b,0x07,0x00,0x00,0x00,0x14,0x00,0x00,
0x00,0x00,0xa7,0x08,0x00,0x00,0x00,0x7b,0xc6,0x00,0x00,0x00,0x0c,0x17,0x02,
0x00,0x00,0x00,0x33,0x33,0x17,0x00,0x00,0x00,0x00,0x7d,0x51,0x63,0x00,0x00,
0x00,0x0c,0x0b,0x09,0x00,0x00,0x00,0x17,0x02,0x00,0x00,0x00,0x33,0x17,0x01,
0x00,0x00,0x00,0x36,0x17,0x02,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,
0x0a,0x00,0x00,0x00,0x7b,0xc6,0x00,0x00,0x00,0x0c,0x17,0x02,0x00,0x00,0x00,
0x34,0x51,0xa0,0x00,0x00,0x00,0x0c,0x0b,0x0b,0x00,0x00,0x00,0x17,0x02,0x00,
0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x32,0x0b,0x0c,
0x00,0x00,0x00,0x32,0x36,0x17,0x02,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,
0xa7,0x0d,0x00,0x00,0x00,0x7b,0xc6,0x00,0x00,0x00,0x0c,0x0b,0x0e,0x00,0x00,
0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x17,0x02,0x00,
0x00,0x00,0x34,0x79,0x00,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x0f,
0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55
};

    buffer=list_func_lib;
    load_function_string(buffer,"list_func_lib.obl");
};

void function_frame_func(void)
{
unsigned char frame_lib[] = {
0x46,0x43,0x00,0x01,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x09,0x00,0x00,
0x00,0x6d,0x61,0x6b,0x65,0x5f,0x66,0x72,0x6d,0x00,0x38,0x00,0x00,0x00,0x04,
0x05,0x6e,0x61,0x6d,0x65,0x00,0x04,0x02,0x76,0x00,0x04,0x04,0x72,0x65,0x74,
0x00,0x04,0x06,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x73,0x65,0x74,0x74,
0x75,0x70,0x6c,0x65,0x00,0x01,0x03,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,
0x01,0x01,0x00,0x00,0x00,0x01,0x02,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x04,
0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x12,0x00,0x00,0x00,0x04,0x01,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x0a,0x00,0x00,0x00,0x04,0x03,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x50,
0x00,0x00,0x00,0x78,0x0b,0x05,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x14,
0x01,0x00,0x00,0x00,0x78,0x15,0x01,0x00,0x00,0x00,0x0b,0x06,0x00,0x00,0x00,
0x17,0x00,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0x78,0x0b,0x07,0x00,0x00,
0x00,0x79,0x00,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0x78,0x15,0x01,0x00,
0x00,0x00,0x0b,0x08,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x79,0x01,0x00,
0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x55,0x12,0x00,0x00,0x00,0x61,0x64,0x64,
0x5f,0x73,0x6c,0x6f,0x74,0x5f,0x74,0x6f,0x5f,0x66,0x72,0x61,0x6d,0x65,0x00,
0x70,0x00,0x00,0x00,0x04,0x04,0x66,0x72,0x6d,0x00,0x04,0x0a,0x73,0x6c,0x6f,
0x74,0x5f,0x6e,0x61,0x6d,0x65,0x00,0x04,0x02,0x6e,0x00,0x04,0x02,0x76,0x00,
0x04,0x02,0x70,0x00,0x04,0x09,0x67,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,
0x04,0x09,0x6c,0x65,0x6e,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x72,0x73,
0x7a,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x73,0x65,0x74,0x74,0x75,0x70,
0x6c,0x65,0x00,0x04,0x06,0x74,0x75,0x70,0x6c,0x65,0x00,0x01,0x02,0x00,0x00,
0x00,0x01,0x01,0x00,0x00,0x00,0x01,0x02,0x00,0x00,0x00,0x01,0x05,0x00,0x00,
0x00,0x01,0x00,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x12,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,
0xff,0xff,0x00,0x1b,0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x04,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x19,0x00,0x00,0x00,0x04,0x05,0x00,0x00,0x00,0x04,0x06,
0x00,0x00,0x00,0x04,0x07,0x00,0x00,0x00,0x04,0x08,0x00,0x00,0x00,0x04,0x09,
0x00,0x00,0x00,0x97,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x0b,0x0a,
0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x78,0x15,
0x02,0x00,0x00,0x00,0x78,0x15,0x02,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,
0x0b,0x0b,0x00,0x00,0x00,0x1f,0x79,0x02,0x00,0x00,0x00,0x14,0x01,0x00,0x00,
0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x0b,0x0c,0x00,0x00,0x00,0x15,0x01,0x00,
0x00,0x00,0x79,0x03,0x00,0x00,0x00,0x78,0x0b,0x0d,0x00,0x00,0x00,0x79,0x04,
0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0x78,0x15,0x00,0x00,0x00,0x00,0x0b,
0x0e,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x79,0x03,0x00,0x00,0x00,0x78,
0x15,0x01,0x00,0x00,0x00,0x78,0x15,0x01,0x00,0x00,0x00,0x79,0x01,0x00,0x00,
0x00,0x0b,0x0f,0x00,0x00,0x00,0x20,0x15,0x00,0x00,0x00,0x00,0x79,0x03,0x00,
0x00,0x00,0x17,0x00,0x00,0x00,0x00,0x55,0x12,0x00,0x00,0x00,0x6d,0x61,0x6b,
0x65,0x5f,0x70,0x61,0x72,0x65,0x6e,0x74,0x5f,0x66,0x72,0x61,0x6d,0x65,0x00,
0xce,0x00,0x00,0x00,0x04,0x04,0x66,0x72,0x6d,0x00,0x04,0x05,0x6e,0x61,0x6d,
0x65,0x00,0x04,0x02,0x70,0x00,0x04,0x02,0x6e,0x00,0x04,0x02,0x76,0x00,0x04,
0x04,0x72,0x65,0x74,0x00,0x04,0x06,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,
0x73,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x67,0x65,0x74,0x74,
0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x6c,0x65,0x6e,0x74,0x75,0x70,0x6c,0x65,
0x00,0x04,0x0a,0x63,0x6f,0x70,0x79,0x74,0x75,0x70,0x6c,0x65,0x00,0x01,0x03,
0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x01,0x02,0x00,0x00,0x00,0x01,0x01,
0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,
0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x01,0x02,0x00,0x00,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x31,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,
0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x32,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x32,0x00,
0x12,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x01,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x24,0x00,0x00,0x00,0x04,0x02,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,
0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x05,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x19,0x00,0x00,0x00,0x04,0x06,0x00,0x00,0x00,0x04,0x07,0x00,0x00,
0x00,0x04,0x08,0x00,0x00,0x00,0x04,0x09,0x00,0x00,0x00,0x04,0x0a,0x00,0x00,
0x00,0xe1,0x00,0x00,0x00,0x78,0x0b,0x0b,0x00,0x00,0x00,0x79,0x00,0x00,0x00,
0x00,0x14,0x03,0x00,0x00,0x00,0x78,0x15,0x03,0x00,0x00,0x00,0x0b,0x0c,0x00,
0x00,0x00,0x17,0x01,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0x78,0x17,0x00,
0x00,0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,0x79,0x02,0x00,0x00,0x00,0x14,0x01,
0x00,0x00,0x00,0x78,0x78,0x15,0x01,0x00,0x00,0x00,0x79,0x03,0x00,0x00,0x00,
0x79,0x00,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x0b,0x0e,0x00,0x00,0x00,
0x14,0x00,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x78,0x15,0x01,0x00,0x00,
0x00,0x79,0x03,0x00,0x00,0x00,0x7d,0x51,0x95,0x00,0x00,0x00,0x0c,0x0b,0x0f,
0x00,0x00,0x00,0x78,0x15,0x03,0x00,0x00,0x00,0x0b,0x10,0x00,0x00,0x00,0x15,
0x02,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0xa7,0x11,0x00,0x00,0x00,0x7b,
0xdb,0x00,0x00,0x00,0x0c,0x0b,0x12,0x00,0x00,0x00,0x78,0x15,0x02,0x00,0x00,
0x00,0x15,0x00,0x00,0x00,0x00,0x78,0x78,0x15,0x01,0x00,0x00,0x00,0x15,0x00,
0x00,0x00,0x00,0x79,0x02,0x00,0x00,0x00,0x79,0x04,0x00,0x00,0x00,0x79,0x01,
0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x0b,0x13,0x00,0x00,0x00,0x1f,0x14,
0x00,0x00,0x00,0x00,0xa7,0x14,0x00,0x00,0x00,0x7b,0x5a,0x00,0x00,0x00,0x15,
0x03,0x00,0x00,0x00,0x55,0x12,0x00,0x00,0x00,0x73,0x65,0x74,0x5f,0x6e,0x5f,
0x66,0x72,0x61,0x6d,0x65,0x5f,0x76,0x61,0x6c,0x75,0x65,0x00,0xf5,0x00,0x00,
0x00,0x04,0x04,0x66,0x72,0x6d,0x00,0x04,0x05,0x73,0x6c,0x6f,0x74,0x00,0x04,
0x06,0x76,0x61,0x6c,0x75,0x65,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,0x02,
0x6e,0x00,0x04,0x02,0x70,0x00,0x04,0x02,0x6c,0x00,0x04,0x09,0x67,0x65,0x74,
0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x6c,0x65,0x6e,0x74,0x75,0x70,0x6c,
0x65,0x00,0x04,0x09,0x73,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x01,0x02,
0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x33,
0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,
0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x00,0x01,
0x00,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,
0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x34,0x00,0x01,0x01,0x00,
0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x34,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x35,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,
0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x35,0x00,0x1b,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,
0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x24,0x00,0x00,0x00,0x04,0x03,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x04,0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,
0x05,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x06,0x00,0x00,0x00,0xff,0xff,
0xff,0x00,0x0f,0x00,0x00,0x00,0x04,0x07,0x00,0x00,0x00,0x04,0x08,0x00,0x00,
0x00,0x04,0x09,0x00,0x00,0x00,0xd6,0x00,0x00,0x00,0x78,0x17,0x00,0x00,0x00,
0x00,0x0b,0x0a,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x14,0x01,0x00,0x00,
0x00,0x0b,0x0b,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x15,0x02,0x00,0x00,
0x00,0x78,0x15,0x01,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0x7d,0x51,0x4f,
0x00,0x00,0x00,0x0c,0x0b,0x0c,0x00,0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,0x14,
0x00,0x00,0x00,0x00,0xa7,0x0e,0x00,0x00,0x00,0x7b,0xd0,0x00,0x00,0x00,0x0c,
0x78,0x78,0x15,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x79,0x00,0x00,
0x00,0x00,0x0b,0x0f,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x17,0x01,0x00,
0x00,0x00,0x7d,0x51,0xb0,0x00,0x00,0x00,0x0c,0x0b,0x10,0x00,0x00,0x00,0x78,
0x78,0x15,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x79,0x00,0x00,0x00,
0x00,0x0b,0x11,0x00,0x00,0x00,0x17,0x02,0x00,0x00,0x00,0x79,0x02,0x00,0x00,
0x00,0x0b,0x12,0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x13,0x00,0x00,
0x00,0x7b,0xd0,0x00,0x00,0x00,0x0c,0x0b,0x14,0x00,0x00,0x00,0x15,0x02,0x00,
0x00,0x00,0x0b,0x15,0x00,0x00,0x00,0x1f,0x14,0x02,0x00,0x00,0x00,0xa7,0x16,
0x00,0x00,0x00,0x7b,0x1f,0x00,0x00,0x00,0x15,0x00,0x00,0x00,0x00,0x55,0x12,
0x00,0x00,0x00,0x67,0x65,0x74,0x5f,0x6e,0x5f,0x66,0x72,0x61,0x6d,0x65,0x5f,
0x76,0x61,0x6c,0x75,0x65,0x00,0xde,0x00,0x00,0x00,0x04,0x04,0x66,0x72,0x6d,
0x00,0x04,0x05,0x73,0x6c,0x6f,0x74,0x00,0x04,0x04,0x72,0x65,0x74,0x00,0x04,
0x02,0x6e,0x00,0x04,0x02,0x70,0x00,0x04,0x02,0x6c,0x00,0x04,0x09,0x67,0x65,
0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x09,0x6c,0x65,0x6e,0x74,0x75,0x70,
0x6c,0x65,0x00,0x01,0x02,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,
0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x36,0x00,0x04,0x04,0x6e,0x69,0x6c,0x00,0x04,0x15,0x2a,
0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,
0x30,0x30,0x30,0x36,0x00,0x01,0x00,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,
0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0x37,0x00,0x01,0x01,0x00,0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,
0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x37,
0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x38,0x00,0x01,0x01,0x00,0x00,0x00,0x04,
0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x38,0x00,0x12,0x00,0x00,0x00,0x04,0x00,0x00,0x00,
0x00,0xff,0xff,0xff,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x24,
0x00,0x00,0x00,0x04,0x02,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x03,0x00,
0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x04,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x04,0x05,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x0a,0x00,0x00,0x00,0x04,0x06,
0x00,0x00,0x00,0x04,0x07,0x00,0x00,0x00,0xcc,0x00,0x00,0x00,0x78,0x17,0x00,
0x00,0x00,0x00,0x0b,0x08,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x14,0x01,
0x00,0x00,0x00,0x0b,0x09,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0x00,0x15,0x02,
0x00,0x00,0x00,0x78,0x15,0x01,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0x7d,
0x51,0x4f,0x00,0x00,0x00,0x0c,0x0b,0x0a,0x00,0x00,0x00,0x0b,0x0b,0x00,0x00,
0x00,0x14,0x00,0x00,0x00,0x00,0xa7,0x0c,0x00,0x00,0x00,0x7b,0xc6,0x00,0x00,
0x00,0x0c,0x78,0x78,0x15,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x79,
0x00,0x00,0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x17,
0x01,0x00,0x00,0x00,0x7d,0x51,0xa6,0x00,0x00,0x00,0x0c,0x0b,0x0e,0x00,0x00,
0x00,0x78,0x78,0x15,0x01,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x79,0x00,
0x00,0x00,0x00,0x0b,0x0f,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x14,0x00,
0x00,0x00,0x00,0xa7,0x10,0x00,0x00,0x00,0x7b,0xc6,0x00,0x00,0x00,0x0c,0x0b,
0x11,0x00,0x00,0x00,0x15,0x02,0x00,0x00,0x00,0x0b,0x12,0x00,0x00,0x00,0x1f,
0x14,0x02,0x00,0x00,0x00,0xa7,0x13,0x00,0x00,0x00,0x7b,0x1f,0x00,0x00,0x00,
0x15,0x00,0x00,0x00,0x00,0x55,0x0c,0x00,0x00,0x00,0x70,0x72,0x69,0x6e,0x74,
0x5f,0x66,0x72,0x61,0x6d,0x65,0x00,0x9c,0x00,0x00,0x00,0x04,0x04,0x66,0x72,
0x6d,0x00,0x04,0x02,0x6e,0x00,0x04,0x02,0x70,0x00,0x04,0x02,0x6c,0x00,0x04,
0x09,0x67,0x65,0x74,0x74,0x75,0x70,0x6c,0x65,0x00,0x04,0x06,0x70,0x72,0x69,
0x6e,0x63,0x00,0x04,0x06,0x70,0x72,0x69,0x6e,0x74,0x00,0x04,0x09,0x6c,0x65,
0x6e,0x74,0x75,0x70,0x6c,0x65,0x00,0x01,0x00,0x00,0x00,0x00,0x03,0x03,0x00,
0x00,0x00,0x20,0x7b,0x00,0x01,0x02,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,
0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,0x30,0x30,
0x30,0x30,0x30,0x30,0x30,0x30,0x39,0x00,0x01,0x00,0x00,0x00,0x00,0x03,0x04,
0x00,0x00,0x00,0x20,0x3a,0x20,0x00,0x01,0x01,0x00,0x00,0x00,0x01,0x01,0x00,
0x00,0x00,0x04,0x15,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x62,0x6c,0x6f,0x63,0x6b,
0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x39,0x00,0x03,0x02,0x00,0x00,0x00,
0x7d,0x00,0x09,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0x00,
0x1b,0x00,0x00,0x00,0x04,0x01,0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x02,
0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x04,0x03,0x00,0x00,0x00,0xff,0xff,0xff,
0x00,0x14,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x04,0x05,0x00,0x00,0x00,
0x04,0x06,0x00,0x00,0x00,0x04,0x07,0x00,0x00,0x00,0xd5,0x00,0x00,0x00,0x78,
0x78,0x17,0x00,0x00,0x00,0x00,0x0b,0x08,0x00,0x00,0x00,0x79,0x00,0x00,0x00,
0x00,0x79,0x01,0x00,0x00,0x00,0x78,0x0b,0x09,0x00,0x00,0x00,0x79,0x02,0x00,
0x00,0x00,0x78,0x17,0x00,0x00,0x00,0x00,0x0b,0x0a,0x00,0x00,0x00,0x79,0x00,
0x00,0x00,0x00,0x14,0x00,0x00,0x00,0x00,0x0b,0x0b,0x00,0x00,0x00,0x14,0x01,
0x00,0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x78,0x15,0x00,0x00,0x00,0x00,0x79,
0x03,0x00,0x00,0x00,0x7d,0x51,0x5c,0x00,0x00,0x00,0x0c,0x7b,0xc9,0x00,0x00,
0x00,0x0c,0x0b,0x0c,0x00,0x00,0x00,0x78,0x78,0x78,0x15,0x00,0x00,0x00,0x00,
0x15,0x01,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x0b,0x0d,0x00,0x00,0x00,
0x79,0x00,0x00,0x00,0x00,0x79,0x01,0x00,0x00,0x00,0x78,0x0b,0x0e,0x00,0x00,
0x00,0x79,0x01,0x00,0x00,0x00,0x78,0x78,0x78,0x15,0x00,0x00,0x00,0x00,0x15,
0x01,0x00,0x00,0x00,0x79,0x00,0x00,0x00,0x00,0x0b,0x0f,0x00,0x00,0x00,0x79,
0x00,0x00,0x00,0x00,0x79,0x02,0x00,0x00,0x00,0x15,0x01,0x00,0x00,0x00,0x0b,
0x10,0x00,0x00,0x00,0x1f,0x14,0x01,0x00,0x00,0x00,0xa7,0x11,0x00,0x00,0x00,
0x7b,0x40,0x00,0x00,0x00,0x78,0x0b,0x12,0x00,0x00,0x00,0x79,0x02,0x00,0x00,
0x00,0x55
};
    buffer=frame_lib;
    load_function_string(buffer,"frame_lib.obl");
};

// встроенные функции
// функции печати
EXTFUNC(print_ext)
{
    PNODE p;
    p=get_n_stacksvalue(get_current_stackd,0);
    print(p);
    return(0);
};

EXTFUNC(princ_ext)
{
    PNODE p;
    p=get_n_stacksvalue(get_current_stackd,0);
    princ(p);
    return(0);
};

int flag_stat;

EXTFUNC(print_stack_ptr)
{
    PNODE p;
    win_printf("\r\nstack_ptr %d\r\n",get_n_stackptr(get_current_stackd));
    return(0);
};

// функци€ выдачи статистики
EXTFUNC(stat_info_)
{
/*
    gc();
*/
    stat_info_new();     // выводим статистикику.
/*
    if(flag_stat==1){
//      stat_info_use();
      flag_stat=0;
    } else {
      flag_stat=1;
    };
*/
    return(0);
};

// функци€ загрузки
EXTFUNC(load_func_)
{
    PNODE p1;
    char *name;
#ifdef __BORLANDC__
    FILE *f;
    char *buffer;
    int len;
    p1=get_n_stacksvalue(get_current_stackd,0);
    name=get_n_stringvalue(p1);
    f=fopen(name,"rb");
    if(f!=NULL){
    fseek(f,0,SEEK_END);
    len=ftell(f);
    fseek(f,0,SEEK_SET);
    buffer=malloc(len);
    fread(buffer,len,1,f);
    fclose(f);
    load_function_string(buffer,name);
    free(buffer);
    } else {
      win_printf("File not found\r\n");
    };
#endif
    return(0);
};
// функци€ сборщика мусора
EXTFUNC(gc_)
{
    gc();
    return(0);
};

#ifdef __BORLANDC__
#ifdef _WIN
char * read_string_(void);
char read_char_(void);
//void RunCycle(void);
#else
#endif
#else
#endif

// функци€ ввода строки
EXTFUNC(get_string)
{
    PNODE p, p1;
#ifdef __BORLANDC__
#ifdef _WIN
    char *s;
#else
#endif
#else
    char s[255];
#endif
#ifdef _DEBUG_
    int d;
    randomize();
    d=rand()%4;
    switch(d){
      case 0:
         strcpy(s,"123");
      break;
      case 1:
         strcpy(s,"help");
      break;
      case 2:
         strcpy(s,"start");
      break;
      case 3:
         strcpy(s,"debug");
      break;
      case 4:
         strcpy(s,"exec");
      break;
    };
#else
#ifdef __BORLANDC__
    char c;
#else
    int c;
#endif
    int ptr, flag;
#ifdef __BORLANDC__
#ifdef _WIN
    s=read_string_();
#else
#endif
#else
#ifdef __LINUX

#else
    ptr=0;
    flag=1;
    while(flag){
//       c=read_char_();
//       RunCycle();

#ifdef __BORLANDC__
       c=getch();
       putch(c);
#endif
       while ((c = uart0Getch()) < 0) {};
       uart0Putch(c);
       if(c==0x0d){
          flag=0;
          s[ptr]=0;
       }else{
          s[ptr]=c;
          ptr++;
       };
    };
#endif
#endif
#endif
    p1=make_n_string(s);
    pool_count_up(p1);
    add_critreg(p1,0);
    push_n_stack(get_current_stackd,p1);
    pool_count_down(p1);
    free_all_critreg();
    return(1);
};

EXTFUNC(string_to_list)
{
    PNODE p,p1;
    p=get_n_stacksvalue(get_current_stackd,0);
    p1=make_n_lists(get_n_stringvalue(p),0);
    push_n_stack(get_current_stackd,p1);
    return(1);
};

int strcmp_(char* str1,char* str2)
{
 int i, flag, len1, len2;
   for(len1=0,i=0;str1[i]!=0;i++){
      len1++;
   };
   for(len2=0,i=0;str2[i]!=0;i++){
      len2++;
   };
   if(len1!=len2){
     flag=2;
   } else {
     flag=0;
     i=0;
     for(len1=0,i=0;str1[i]!=0;i++){
        if(str1[i]!=str2[i]){
           flag=1;
        };
     };
   };
   return(flag);
};

// функци€ сравнени€ строк
EXTFUNC(cmp_string)
{
    PNODE p1, p2;
    char *s1, *s2;
    int res;

    p1=get_n_stacksvalue(get_current_stackd,0);
    p2=get_n_stacksvalue(get_current_stackd,1);
    pool_count_up(p1);
    pool_count_up(p2);
    add_critreg(p1,0);
    add_critreg(p2,1);
    s1=get_n_stringvalue(p1);
    s2=get_n_stringvalue(p2);
    res=strcmp_(s1,s2);
    push_n_stack(get_current_stackd,make_n_long(res));
    pool_count_down(p2);
    pool_count_down(p1);
    free_all_critreg();
    return(1);
};
//функци€ сложени€ строк
EXTFUNC(cmp_strcat)
{
    PNODE p1, p2, p3;
    char *s1, *s2, *s3;
    int res;

    p1=get_n_stacksvalue(get_current_stackd,0);
    p2=get_n_stacksvalue(get_current_stackd,1);
    pool_count_up(p1);
    pool_count_up(p2);
    add_critreg(p1,0);
    add_critreg(p2,1);
    s1=get_n_stringvalue(p1);
    s2=get_n_stringvalue(p2);
    //s3=malloc(strlen(s1)+strlen(s2)+1);
    p3=make_n_stringn(0,strlen(s1)+strlen(s2));
    s3=get_n_stringvalue(p3);
    strcat(s3,s2);
    strcat(s3,s1);    
    push_n_stack(get_current_stackd,p3);
    pool_count_down(p2);
    pool_count_down(p1);
    free_all_critreg();
    return(1);
};











// функци€ сравнени€ строк
EXTFUNC(_debug)
{
    PNODE p1;
    int res;

    p1=get_n_stacksvalue(get_current_stackd,0);
    res=get_n_longvalue(p1);
    global_debug_code=res;
    return(0);
};

EXTFUNC(get_func_num_arg)
{
    PNODE p;
    int l;
    p=get_n_stacksvalue(get_current_stackd,0);
//    l=get_n_type(p);
//    win_printf("%d\r\n",l);
    if(is_n_func(p)) {
       push_n_stack(get_current_stackd,make_n_long(get_n_tuplelen(get_n_funcarg(p))));
    } else {
       push_n_stack(get_current_stackd,NIL);
    };
//    print(p);
    return(1);
};

EXTFUNC(_clear_stack_to_label)
{
    PNODE p,n,v,s;
    long l;

    n=get_n_stacksvalue(get_current_stackd,0);
    p=get_n_stacksvalue(get_current_stackd,1);
    v=get_n_stacksvalue(get_current_stackd,2);

    l=3;
    while((s=get_n_stacksvalue(get_current_stackd,l))!=p) {
       l++;
    };

    if(l!=0) {
       if(s>4) s=get_n_stacksvalue(get_current_stackd,4);
       // очистим стек
       while(l>=0) {
          pop_n_stack(get_current_stackd);
          l--;
       };
    } else {
       fatal_error(" Ќарушена синхронность стека данных!\n");
       global_end_exec=3;
    };

    // выставим обратно
    push_n_stack(get_current_stackd,v);
    push_n_stack(get_current_stackd,p);
    push_n_stack(get_current_stackd,n);
    return(0);
};

EXTFUNC(get_pnode_arg)
{
    PNODE p;
    p=get_n_stacksvalue(get_current_stackd,1);
//    win_printf(">>>>> %ld\n",(long)p);
    push_n_stack(get_current_stackd,make_n_long((long)p));
    return(1);
};

EXTFUNC(_gc)
{
    PNODE p;
    gc();
    return(0);
};

/*
EXTFUNC(end_application)
{
    end_prog();
    return(0);
};
*/

// функци€ одно€чеечной арифметики
PNODE num_plus(PNODE p1, PNODE p2)
{
int l1,l2;
    // прибавл€ем число
    l1=get_n_longvalue(p1);
    l2=get_n_longvalue(p2);
    set_n_longvalue(p1,l1+l2);
    return(p1);
};

PNODE num_minus(PNODE p1, PNODE p2)
{
int l1,l2;
    // прибавл€ем число
    l1=get_n_longvalue(p1);
    l2=get_n_longvalue(p2);
    set_n_longvalue(p1,l1-l2);
    return(p1);
};

PNODE num_inc(PNODE p1)
{
int l1;
    // прибавл€ем число
    l1=get_n_longvalue(p1);
    set_n_longvalue(p1,l1+1);
    return(p1);
};

PNODE num_dec(PNODE p1)
{
int l1;
    // прибавл€ем число
    l1=get_n_longvalue(p1);
    set_n_longvalue(p1,l1-1);
    return(p1);
};

EXTFUNC(plus_number)
{
PNODE p1, p2;
    p1=get_n_stacksvalue(get_current_stackd,0);
    p2=get_n_stacksvalue(get_current_stackd,1);

    push_n_stack(get_current_stackd,num_plus(p1,p2));
    return(1);
};

EXTFUNC(minus_number)
{
PNODE p1, p2;
    p1=get_n_stacksvalue(get_current_stackd,0);
    p2=get_n_stacksvalue(get_current_stackd,1);

    push_n_stack(get_current_stackd,num_minus(p1,p2));
    return(1);
};

EXTFUNC(inc_number)
{
PNODE p1;
    p1=get_n_stacksvalue(get_current_stackd,0);

    push_n_stack(get_current_stackd,num_inc(p1));
    return(1);
};

EXTFUNC(dec_number)
{
PNODE p1;
    p1=get_n_stacksvalue(get_current_stackd,0);

    push_n_stack(get_current_stackd,num_dec(p1));
    return(1);
};

// получить по номеру слот
EXTFUNC(get_item_by_num)
{
PNODE p1, p2, p3;
char *s;
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
//          print(p1);
//          print(p2);

    switch(get_n_type(p1)){
       case N_FRAME:
//       win_printf("Frame: \r\n");
          p3=find_n_frame_slot_by_num(p1, get_n_longvalue(p2));
       break;
       case N_SYMBOL:
          s=get_n_stringvalue(p1);
          p3=make_n_long(s[get_n_longvalue(p2)]);
       break;
       case N_STRING:
          s=get_n_stringvalue(p1);
          p3=make_n_long(s[get_n_longvalue(p2)]);
       break;
       case N_TUPLE:
          p3=NIL;
       break;
       default:
          p3=FALSE;
       break;   
    };
    push_n_stack(get_current_stackd,p3);
    return(1);
};

EXTFUNC(set_item_by_num)
{
PNODE p1, p2, p3;
char *s;
    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
//          print(p1);
//          print(p2);

    switch(get_n_type(p1)){
       case N_FRAME:
       win_printf("Frame: \r\n");
       break;
       case N_SYMBOL:
          s=get_n_stringvalue(p1);
          s[get_n_longvalue(p2)]=get_n_longvalue(p3);
       break;
       case N_STRING:
          s=get_n_stringvalue(p1);
          s[get_n_longvalue(p2)]=get_n_longvalue(p3);
       break;
       case N_TUPLE:
          p3=NIL;
       break;
       default:
          p3=FALSE;
       break;   
    };
    return(0);
};

// получить по номеру им€ слота
EXTFUNC(get_name_item_by_num)
{
PNODE p1, p2, p3;

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
//          print(p1);
//          print(p2);

    switch(get_n_type(p1)){
       case N_FRAME:
          p3=find_n_frame_slot_by_num(p1, get_n_longvalue(p2));
          if(p3!=NIL){
            p3=get_n_tuplevalue(p3,0);
          };
       break;
       case N_SYMBOL:
          p3=NIL;
       break;
       case N_STRING:
          p3=NIL;
       break;
       case N_TUPLE:
          p3=NIL;
       break;
    };
    push_n_stack(get_current_stackd,p3);
    return(1);
};

// получить по номеру значение слота
EXTFUNC(get_value_item_by_num)
{
PNODE p1, p2, p3;

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
//          print(p1);
//          print(p2);

    switch(get_n_type(p1)){
       case N_FRAME:
          p3=find_n_frame_slot_by_num(p1, get_n_longvalue(p2));
          if(p3!=NIL){
            p3=get_n_tuplevalue(p3,2);
          };
       break;
       case N_SYMBOL:
          p3=NIL;
       break;
       case N_STRING:
          p3=NIL;
       break;
       case N_TUPLE:
          p3=NIL;
       break;
    };
    push_n_stack(get_current_stackd,p3);
    return(1);
};

// получить количество слотов
EXTFUNC(get_slot_num)
{
PNODE p1, p2, p3;
int l;

    p1=get_n_stacksvalue(get_current_stackd,0);
    l=get_n_slot_num(p1)-1;
    push_n_stack(get_current_stackd,make_n_long(l));
    return(1);
};

// преобразование типов
EXTFUNC(Integer)
{
    PNODE p,n,v,s;
    long l;

    n=get_n_stacksvalue(get_current_stackd,0);
    switch(get_n_type(n)){
       case N_SYMBOL:{
         s=n_symbol_to_string(n);
         p=n_string_to_long(s);
         break;
       }
       case N_LONG:{
         p=n;
         break;
       }
//       case 3:{
//         p=n_float_to_long(n);
//         break;
//       }
       case N_STRING:{
         p=n_string_to_long(n);
         break;
       }
       default:
         p=make_n_long((long)n);
    };
    push_n_stack(get_current_stackd,p);
    return(1);
};

/*
EXTFUNC(Float)
{
    PNODE p,n,v,s;
    long l;

    n=get_n_stacksvalue(get_current_stackd,1);
    switch(get_n_type(n)){
       case 1:{
         s=n_symbol_to_string(n);
         p=n_string_to_float(s);
         break;
       }
       case 2:{
         p=n_long_to_float(n);
         break;
       }
       case 3:{
         p=n;
         break;
       }
       case 4:{
         p=n_string_to_float(n);
         break;
       }
       default:
         v=make_n_long((long)n);
         p=n_long_to_float(v);
    };
    push_n_stack(get_current_stackd,p);
    return(1);
};
*/

EXTFUNC(String)
{
    PNODE p,n,v,s;
    char * c;

    n=get_n_stacksvalue(get_current_stackd,0);
    switch(get_n_type(n)){
       case N_SYMBOL:{
         p=n_symbol_to_string(n);
         break;
       }
       case N_LONG:{
         p=n_long_to_string(n);
         break;
       }
//       case 3:{
//         p=n_float_to_string(n);
//         break;
//       }
       case N_STRING:{
         p=n;
         break;
       }
       default:
        p=NIL;
       //  c=sprinc(n);
       //  p=make_n_string(c);
       //  free(c);
    };
    push_n_stack(get_current_stackd,p);
    return(1);
};

EXTFUNC(Symbol)
{
    PNODE p,n,v,s;
    long l;

    n=get_n_stacksvalue(get_current_stackd,0);
    switch(get_n_type(n)){
       case N_SYMBOL:{
         p=n;
         break;
       }
       default:
         p=n_string_to_symbol(v);
    };
    push_n_stack(get_current_stackd,p);
    return(1);
};

/*
PNODE n_long_to_string(PNODE p)
{
 PNODE ret;
 char s[45];
    sprintf(s,"%ld",(long)(get_n_longvalue(p)));
    ret=make_n_string(s);
    return(ret);
};

PNODE n_string_to_long(PNODE p)
{
 PNODE ret;
    ret=make_n_long(atol(get_n_stringvalue(p)));
    return(ret);
};

PNODE n_symbol_to_string(PNODE p)
{
 PNODE ret;
    ret=make_n_string(get_n_symbolvalue(p));
    return(ret);
};

PNODE n_string_to_symbol(PNODE p)
{
 PNODE ret;

    ret=make_global_symbol(get_n_stringvalue(p));
    return(ret);
};
*/

#ifdef EXTMOD 
int read_date_time_p(char * time, char *date);
int read_taler_string(unsigned char num, char buff[]);
int read_header_string(unsigned char num, char buff[]);
void end_pay_card(s_int answer, unsigned char font_size1, unsigned char *str1, unsigned char font_size2, unsigned char *str2, unsigned char font_size3, unsigned char *str3);
void end_weigh(s_int answer, int ves);
void end_discont(s_int answer, int skid1, int skid2, int skid3, int skid4, int skid5, int skid6, unsigned char font_size1, unsigned char *str1, unsigned char font_size2, unsigned char *str2, unsigned char font_size3, unsigned char *str3);

void end_system(void);

void wait_cash(int timeout);
int get_char_cash(void);
char * get_card_cash(void);

int read_casher_name(unsigned char num, char name[]);
void beep_em(int tone, int delay);
void escape(void);
s_int print_string(char *str,s_int font_size);
void draw_line(char *str, s_int pos, s_int disp);

int create_menu_(int id);
int add_menu_item_(int menu, int id, int action, char * str);
int exec_menu_(int menu);

extern int global_packet_error;
extern int global_func_set_value;
extern char * global_register_slot_name;
extern char * global_register_slot_id;
extern char * global_register_slot_init_name;
extern char * global_register_slot_work_name;
extern char *  global_register_slot_type;

typedef struct {
	int printer_lines;
	int display_casher_lines;
	int display_casher_num;
	int display_buyer_lines;
	int display_buyer_num;
} CASH_INFO, * PCASH_INFO;

extern CASH_INFO cash_info;

typedef struct {
  char summa[21];
  char ecr_number[9];
  char card_operation;
  char card_number[51];
  char casher_number[3];
  char ext_field;
  char receipt_number[5];

  char summa_disc1[14+1];
  char summa_disc2[14+1];
  char summa_disc3[14+1];
  char summa_disc4[14+1];
  char summa_disc5[14+1];
  char summa_disc6[14+1];
} Tecr_sale_on_pos;

typedef struct {
  char cost[21];
  char card_operation;
} Tecr_to_scales;

Tecr_sale_on_pos ecr_sale_on_pos;        
extern unsigned char code_operation;
Tecr_to_scales ecr_to_scales;

// структура настроек
typedef struct {
	int s_open_close;
	int s_nalog_ins;
	int s_fis_sost;
	int s_nlg_on_off;
	int s_skd_on_off;
	int s_nck_on_off;
	int s_dck_on_off;
	int s_bnk_on_off;
	int s_bnc_on_off;
	int s_nal_on_off;
	int s_typ_nlg;
	int s_pcz_on_off;
	int s_reg_kkm;
	int s_ves;
	int s_prn_shk;
	int s_kod_on_off;
	int s_typ_cena;
	int s_typ_shk;
	int s_typ_code;
	int s_storno;
	int s_vn_ind;
	int s_spd_sk;
	int s_kod_otch;
	int s_otd_upr;
	int type_magn_card;
	int s_tset_on_off;
	int s_kass_oper;
	int s_typ_srift;
	int s_d_tim;
	int r_ot_otdel;
	int r_ot_kassir;
	int r_ot_adm_tz;
	int r_ot_adm_pril;
	int r_kl;
	int r_bd_towar;
	int s_zap_kod;
	int tek_read_kl;
	int tek_zap_kd;
	char razr_otd[50];
	int n_otdel;
	int n_kassir;
	int n_admin;
	int n_men_pr;
	int max_sym_zapr;
	int otdel_po_um;
		int s_dt;
		int s_tim_bd;
		int com_gs;
		int com_sk;
		int com_ds;
		int s_flash_serv;
		int razr_ls;
		int s_wait_net;
		int ts_nom_kkm;
		unsigned char adr_kkm[15+1];    // адрес ккм
		unsigned char maska_set[15+1];  //маска сети
		unsigned char adr_serv[15+1];   //адрес сервера
		unsigned char shluz[15+1];      //шлюз
} T_cash_setting;
typedef T_cash_setting * PT_cash_setting;

typedef struct { //артикул
	  /*s_*/int artikl_kol;	  
	  /*s_*/int artikl_pol1;
	  /*s_*/int artikl_pol2;
	  /*s_*/int artikl_pol3;
	  /*s_*/int artikl_pol4;
	  /*s_*/int artikl_pol5;

          unsigned char artikl_name1[20+1];
	  unsigned char artikl_name2[20+1];
	  unsigned char artikl_name3[20+1];
	  unsigned char artikl_name4[20+1];
	  unsigned char artikl_name5[20+1];
	  
} T_cash_artikl;

typedef T_cash_artikl * PT_cash_artikl;

extern int sale_of_num;
extern int sale_of_num_pos;

extern char record_prop;
//extern s_int purchase_num;
extern char record_date[7];
extern char record_time[5];
extern char purchase_summa[11];
//extern s_int record_branch;
//extern s_int record_casher;
extern char purchase_code[14];
//extern s_int record_check;
//extern s_int purchase_qty;
//extern char purchase_prop;
extern char purchase_cost[11];
extern char purchase_tax_i[7];
extern char purchase_tax_o[7];
extern char purchase_discount[7];
extern char purchase_charge[7];
extern char purchase_discount_ext1[7];
extern char purchase_discount_ext2[7];
extern char purchase_discount_ext3[7];
extern char purchase_discount_ext4[7];
//extern char record_prop1;

extern char purchase_num_e[5];
extern char record_branch_e[3];
extern char record_casher_e[3];
extern char record_check_e[5];
extern char purchase_qty_e[7];
extern char purchase_prop_e[2];
extern char record_prop1_e[2];
extern unsigned char code_operation;



int OpenPort(int lPort,int *lSerialPort);
void ClosePort(int lSerialPort);
void SetBaud(long lRate, int lSerialPort, int lParity);
void SendChar(char cChar,int lSerialPort);
int ReceiveChar(long lTimeout,int lSerialPort);
int ReceiveString(long lTimeout,int lSerialPort, char *str, int len);
void WaitFor(char cWaitChar,int lSerialPort);

char r_buff[2048];

/*************************************
*  basic DBF function section 
*************************************/
#include "../dbf/dbfU.h"
EXTFUNC(f_dbfOpen) {
	PNODE p1;
	DBF *fd;
	char filename[256] = "/mnt/mmc/";
	
	p1 = get_n_stacksvalue(get_current_stackd,0);
  strcat(filename, get_n_stringvalue(p1));

  fd = OpenDBF(filename);
  
  if (fd) {
    p1=make_n_long((int)fd); 
  }
  else {
    p1=FALSE;
  }
  push_n_stack(get_current_stackd,p1);
  return(1);
}

EXTFUNC(f_dbfClose) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	if ( CloseDBF((DBF *)get_n_longvalue(p1)) ) {
		p1=FALSE;
	}
	else {
	  p1=TRUE;
	}
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfGotoRecord) {
	PNODE p1;
	PNODE p2;
	int rec;
	DBF *fd;

  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);
	
	fd = (DBF *)get_n_longvalue(p1);
	rec = get_n_longvalue(p2);

	if ( GotoRecord(fd, rec) ) {
		p1=FALSE;
	}
	else {
	  p1=TRUE;
	}
	
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfSaveRecord) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	if ( SaveRecord((DBF *)get_n_longvalue(p1)) ) {
		p1=FALSE;
	}
	else {
	  p1=TRUE;
	}
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfReadRecord) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	if ( ReadRecord((DBF *)get_n_longvalue(p1)) ) {
		p1=FALSE;
	}
	else {
	  p1=TRUE;
	}
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfGetField) {
	PNODE p1;
	PNODE p2;

	int len;
	DBF *fd;
	char *name;
	char buff[256];
	
  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);

	fd = (DBF *)get_n_longvalue(p1);
  name = get_n_stringvalue(p2);
  
  if ( GetField(fd, name, buff) ) {
  	p1 = make_n_string(buff);
  }
  else {
  	p1 = FALSE;
  }
  push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfPutField) {
	PNODE p1;
	PNODE p2;
	PNODE p3;

	int len;
	DBF *fd;
	char *name;
	char *buff;
	
  p1 = get_n_stacksvalue(get_current_stackd,2);
  p2 = get_n_stacksvalue(get_current_stackd,1);
  p3 = get_n_stacksvalue(get_current_stackd,0);
  
	fd = (DBF *)get_n_longvalue(p1);
  name = get_n_stringvalue(p2);
  buff = get_n_stringvalue(p3);
  
  if ( PutField(fd, name, buff) ) {
  	p1 = FALSE;
  }
  else {
  	p1 = TRUE;
  }
  push_n_stack(get_current_stackd,p1);
	return(1);

}

EXTFUNC(f_dbfNewRecord) {
	PNODE p1;
	PNODE p2;

	DBF *fd;
	char dup;
	
  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);

	fd = (DBF *)get_n_longvalue(p1);
  dup = *(get_n_stringvalue(p2));
  
  NewRecord(fd, dup);
  
  return(0);
}

EXTFUNC(f_dbfDelRecord) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	DelRecord((DBF *)get_n_longvalue(p1));
	return(0);
}

EXTFUNC(f_dbfPack) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	Pack((DBF *)get_n_longvalue(p1));
	return(0);
}

EXTFUNC(f_dbfGetLastRecord) {
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	p1 = make_n_long( GetLastRecord((DBF *)get_n_longvalue(p1)) );
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_dbfAskRecordStructure) {
	PNODE p1, l1, l2;
	int i;
	DBF *file;
	char tag[2]={0,0};
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	
	file = (DBF *)get_n_longvalue(p1);
	l1 = NIL;

	for( i=0 ; file->Header->Field[i].name[0] != EOFields ; i++ ) {
  	tag[0]=file->Header->Field[i].tag;
  	/* postorder list creation */
		l2 = make_n_list( make_n_long(file->Header->Field[i].prec), NIL);
	  l2 = make_n_list( make_n_long(file->Header->Field[i].width), l2);
    l2 = make_n_list( make_n_string(tag), l2);
    l2 = make_n_list( make_n_string(file->Header->Field[i].name), l2);

		l1 = make_n_list(l2, l1);
	}

	push_n_stack(get_current_stackd,l1);
	return(1);	  
}

/*************************************
*  basic file function section 
*************************************/
EXTFUNC(f_fileOpen)
{
	PNODE p1;
	PNODE p2;
	FILE *fd;
	char filename[256] = "/mnt/mmc/";
		
  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);

  strcat(filename, get_n_stringvalue(p1));
  
	if (get_n_longvalue(p2)) {
  	fd = fopen(filename, "wb");
  }
  else {
    fd = fopen(filename, "rb");
  }
    
  if (fd) {
    p1=make_n_long((int)fd); 
  }
  else {
    p1=FALSE;
  }
  push_n_stack(get_current_stackd,p1);
  return(1);
}

EXTFUNC(f_fileClose)
{
	PNODE p1;
	
	p1=get_n_stacksvalue(get_current_stackd,0);
	fclose((FILE *)get_n_longvalue(p1));
	return(0);
}

EXTFUNC(f_fileGetSize)
{
	PNODE p1;
	FILE *fd;
	long fpos;
	long size;
	int err;
	
	p1 = get_n_stacksvalue(get_current_stackd,0);
  fd = (FILE *)get_n_longvalue(p1);
  
  clearerr(fd);

  fpos = ftell(fd);
  fseek(fd, 0L, SEEK_END);
	size = ftell(fd);
 	fseek(fd, fpos, SEEK_SET);

  if ( (err = ferror(fd)) ) {
  	p1 = FALSE;
  	printf("Error occured during ftell of fseek: %d\n", err);
  }
  else {
  	p1 = make_n_long(size);
  }

	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_fileRead)
{
	PNODE p1;
	PNODE p2;
	int len;
	int size;
	FILE *fd;

  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);
	
	fd = (FILE *)get_n_longvalue(p1);
	
	len = get_n_longvalue(p2);
	if ( len > 2048 ) {
		len = 2048;
	}

	clearerr(fd);
	size = fread(r_buff, 1, len, fd);

	if(ferror(fd)) {
  	p1=FALSE;
  } else {
  	p1=make_n_stringn(r_buff,size);
  }
  push_n_stack(get_current_stackd,p1);
  return(1);
}

EXTFUNC(f_fileWrite)
{
	PNODE p1;
	PNODE p2;
	int len;
	FILE *fd;
	char *str;
	
  p1=get_n_stacksvalue(get_current_stackd,1);
  p2=get_n_stacksvalue(get_current_stackd,0);
	
	fd = (FILE *)get_n_longvalue(p1);
  str = get_n_stringvalue(p2);

	clearerr(fd);
	fwrite(str, strlen(str), 1, fd);
	if (ferror(fd)) {
		p1 = FALSE;
	}
	else {
		p1 = TRUE;
	}
	push_n_stack(get_current_stackd,p1);
	return(1);
}

EXTFUNC(f_OpenPort)
{
    PNODE p1;
    int ret;
    int lSerialPort;

    p1=get_n_stacksvalue(get_current_stackd,0);
    ret=OpenPort(get_n_longvalue(p1),&lSerialPort);
    if(ret){
      p1=make_n_long(lSerialPort);      
    } else {
      p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_ClosePort)
{
    PNODE p1;
    int ret;
    int lSerialPort;

    p1=get_n_stacksvalue(get_current_stackd,0);
    ClosePort(get_n_longvalue(p1));
    return(0);
};

EXTFUNC(f_SetBaud)
{
    PNODE p1,p2,p3;
    int ret;
    int lSerialPort;

    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    SetBaud(get_n_longvalue(p1),get_n_longvalue(p2),get_n_longvalue(p3));
    return(0);
};

EXTFUNC(f_SendString)
{
    PNODE p1,p2,p3;
    int ret;
    int len;
    char *ch;
    int lSerialPort,i;

    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    ch=get_n_stringvalue(p1);
    len=get_n_longvalue(p3);
    lSerialPort=get_n_longvalue(p2);
    for(i=0;i<len;i++) SendChar(ch[i], lSerialPort);
    return(0);
};

EXTFUNC(f_ReceiveChar)
{
    PNODE p1,p2;
    int ret;
    char buff[256];

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
    ret=ReceiveChar(get_n_longvalue(p1), get_n_longvalue(p2));
    if(ret>=0){
      p1=make_n_long(ret);      
    } else {
      p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_ReceiveString)
{
    PNODE p1,p2;
    int ret;
    char buff[256];

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
    ret=ReceiveString(get_n_longvalue(p1), get_n_longvalue(p2),buff,255);
    if(ret>=0){
      p1=make_n_stringn(buff,ret);      
    } else {
      p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

// -------------------------------------------------------------------------
#include "../em/selectserver.h"
int SA_Trade_Open (PSOCKET_INFO sockt, char *ip_addr, int port);
int SA_Trade_Send (PSOCKET_INFO sockt, char * str, int len);
int SA_Trade_Recv (PSOCKET_INFO sockt, char * str, int len, int timeout_sec);
int SA_Trade_Close (PSOCKET_INFO sockt);

int request_socket_slot(void);
PSOCKET_INFO get_socket_slot(int ss_id);
int close_socket_slot(int ss_id);


EXTFUNC(f_OpenTradePort)
{
    PNODE p1, p2;
    int ret, ss_id;
    int lSerialPort;
    char *ip_addr;
    int port;

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ip_addr=get_n_stringvalue(p1);
    port=get_n_longvalue(p2);
    ss_id=request_socket_slot();
    if(ss_id>=0){
        ret=SA_Trade_Open (get_socket_slot(ss_id), ip_addr, port);
        if(ret==0){
            p1=make_n_long(ss_id);
        } else {
            p1=FALSE;
        };
    } else {
        p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};


EXTFUNC(f_CloseTradePort)
{
    PNODE p1;
    int ret;
    int ss_id;

    p1=get_n_stacksvalue(get_current_stackd,0);
    ss_id=get_n_longvalue(p1);
    SA_Trade_Close (get_socket_slot(ss_id));
    close_socket_slot(ss_id);

    return(0);
};



EXTFUNC(f_SendTradeString)
{
    PNODE p1,p2,p3;
    int ret;
    int len;
    char *ch;
    int ss_id;

    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    ch=get_n_stringvalue(p2);
    len=get_n_longvalue(p3);
    ss_id=get_n_longvalue(p1);
    SA_Trade_Send (get_socket_slot(ss_id), ch, len);
    if(ret==0){
        p1=make_n_long(ss_id);
    } else {
        p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

//----------------Replate this Function------------------------------------------------
EXTFUNC(f_ReceiveTradeString)
{
    PNODE p1,p2;
    int ret;
    int ss_id;
    int timeout_sec;

    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    timeout_sec=get_n_longvalue(p2);
    ss_id=get_n_longvalue(p1);
    ret=SA_Trade_Recv(get_socket_slot(ss_id), r_buff, 2000, timeout_sec);
    if(ret>=0){
      p1=make_n_stringn(r_buff,ret);
    } else {
    	if(ret==-3){
         p1=NIL;    	  
      } else {
         p1=FALSE;
      };
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};


// --------------------------------------------------------------------------

EXTFUNC(f_SaveString)
{
    PNODE p1,p2,p3;
    int ret;
    int len;
    char *ch, *fn;
    int lSerialPort,i;

    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    fn=get_n_stringvalue(p1);
    ch=get_n_stringvalue(p2);
    len=get_n_longvalue(p3);
    save_file_em(fn,ch,len);
    return(0);
};

EXTFUNC(f_LoadString)
{
    PNODE p1,p2;
    int ret;
    char *fn, buff[256];

    p1=get_n_stacksvalue(get_current_stackd,0);
    fn=get_n_stringvalue(p1);
    ret=read_file_em(fn,buff,255);
    if(ret>0){
      p2=make_n_stringn(buff,ret);      
    } else {
      p2=FALSE;
    };
    push_n_stack(get_current_stackd,p2);
    return(1);
};


EXTFUNC(f_sleep)
{
    PNODE p1;
    int ret;
    int lSerialPort;

    p1=get_n_stacksvalue(get_current_stackd,0);
    usleep(1000*get_n_longvalue(p1));
    return(0);
};
// начало
EXTFUNC(f_end_pay_card)
{
    PNODE p1,p2,p3,p4,p5,p6,p7;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,6);
    p2=get_n_stacksvalue(get_current_stackd,5);
    p3=get_n_stacksvalue(get_current_stackd,4);
    p4=get_n_stacksvalue(get_current_stackd,3);
    p5=get_n_stacksvalue(get_current_stackd,2);
    p6=get_n_stacksvalue(get_current_stackd,1);
    p7=get_n_stacksvalue(get_current_stackd,0);
    end_pay_card(get_n_longvalue(p1), get_n_longvalue(p2), get_n_stringvalue(p3), get_n_longvalue(p4), get_n_stringvalue(p5), get_n_longvalue(p6), get_n_stringvalue(p7));
    push_n_stack(get_current_stackd,TRUE);
    return(1);
};

EXTFUNC(f_end_weigh)
{
    PNODE p1,p2;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
print(p2);
    end_weigh(get_n_longvalue(p1), get_n_longvalue(p2));
    push_n_stack(get_current_stackd,TRUE);
    return(1);
};

EXTFUNC(f_end_discont)
{
    PNODE p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,12);
    p2=get_n_stacksvalue(get_current_stackd,11);
    p3=get_n_stacksvalue(get_current_stackd,10);
    p4=get_n_stacksvalue(get_current_stackd,9);
    p5=get_n_stacksvalue(get_current_stackd,8);
    p6=get_n_stacksvalue(get_current_stackd,7);
    p7=get_n_stacksvalue(get_current_stackd,6);
    p8=get_n_stacksvalue(get_current_stackd,5);
    p9=get_n_stacksvalue(get_current_stackd,4);
    p10=get_n_stacksvalue(get_current_stackd,3);
    p11=get_n_stacksvalue(get_current_stackd,2);
    p12=get_n_stacksvalue(get_current_stackd,1);
    p13=get_n_stacksvalue(get_current_stackd,0);
    end_discont(get_n_longvalue(p1), get_n_longvalue(p2), get_n_longvalue(p3), get_n_longvalue(p4), get_n_longvalue(p5), get_n_longvalue(p6), get_n_longvalue(p7), get_n_longvalue(p8), get_n_stringvalue(p9), get_n_longvalue(p10), get_n_stringvalue(p11), get_n_longvalue(p12), get_n_stringvalue(p13));
    push_n_stack(get_current_stackd,TRUE);
    return(1);
};

EXTFUNC(f_create_menu)
{
    PNODE p1;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,0);
    ret=create_menu_(get_n_longvalue(p1));
    if(ret==NULL){
      p1=FALSE;
    } else {
      p1=make_n_long(ret);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_add_menu_item)
{
    PNODE p1, p2, p3, p4;
    p1=get_n_stacksvalue(get_current_stackd,3);
    p2=get_n_stacksvalue(get_current_stackd,2);
    p3=get_n_stacksvalue(get_current_stackd,1);
    p4=get_n_stacksvalue(get_current_stackd,0);
    add_menu_item_(get_n_longvalue(p1), get_n_longvalue(p2), get_n_longvalue(p3), get_n_stringvalue(p4));
    return(0);
};

extern int screen_line_begin;
extern int screen_line_num;
    

EXTFUNC(f_exec_menu)
{
    PNODE p1, p2, p3;
    char name[40];
    int ret;
    int screen_line_begin_old;
    int screen_line_num_old;
    
    screen_line_begin_old=screen_line_begin;
    screen_line_num_old=screen_line_num;
    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    screen_line_begin=get_n_longvalue(p2);
    screen_line_num=get_n_longvalue(p3);
    ret=exec_menu_(get_n_longvalue(p1));
    if(ret<0){
      p1=FALSE;
    } else {
      p1=make_n_long(ret);      
    };
    screen_line_begin=screen_line_begin_old;
    screen_line_num=screen_line_num_old;
    push_n_stack(get_current_stackd,p1);
    return(1);
};


EXTFUNC(f_beep)
{
    PNODE p1, p2;
    char name[40];
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
    beep_em(get_n_longvalue(p1),get_n_longvalue(p2));
    p1=TRUE;      
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_wait_cash)
{
    PNODE p1;
    char name[40];
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,0);
    wait_cash(get_n_longvalue(p1));
    p1=TRUE;      
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_get_char_cash)
{
    PNODE p1;
    char name[40];
    int ret;
    
    ret=get_char_cash();
    if(ret<0){
      p1=FALSE;
    } else {
      p1=make_n_long(ret);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};


EXTFUNC(f_get_card_cash)
{
    PNODE p1;
    char name[40];
    char* ret;
    
    ret=get_card_cash();
    if(ret==NULL){
      p1=FALSE;
    } else {
      p1=make_n_string(ret);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_get_interrupt_cash)
{
    PNODE p1;
    char name[40];
    char* ret;
    
    ret=get_interrupt_cash();
    if(ret){
      p1=TRUE;      
    } else {
      p1=FALSE;
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

// ¬озвращает: 1 - источник прерывани€
// 2 - источник клавиатура, второй элемент списка - символ
// 3 - источник карта, второй элемент списка - строка
EXTFUNC(f_wait_event)
//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
{
    PNODE p1, p2;
    int ret;
    int l;

    p1=get_n_stacksvalue(get_current_stackd,0);
    l=get_n_longvalue(p1);
    p2=FALSE;
    while(l--){
    	usleep(1);
    	ret=get_interrupt_cash();
    	if(ret){
		p1=make_n_long(1);
		p2=make_n_list(p1,NIL);
		l=0;
	};
    	ret=get_char_cash();
    	if(ret>=0){
      		p1=make_n_long(ret);      
		p2=make_n_list(p1,NIL);
		p1=make_n_long(2);
		p2=make_n_list(p1,p2);
		l=0;
    	};
    	ret=get_card_cash();
    	if(ret!=NULL){
      		p1=make_n_string(ret);      
		p2=make_n_list(p1,NIL);
		p1=make_n_long(3);
		p2=make_n_list(p1,p2);
		l=0;
    	};
    };
    push_n_stack(get_current_stackd,p2);
    return(1);
};


EXTFUNC(f_read_date_time)
{
    PNODE p1;
    char time[30], date[30];
    int ret;
    
    ret=read_date_time_p(time, date);
    if(ret!=0){
      p1=FALSE;
    } else {
      p1=make_n_list(make_n_string(time),make_n_string(date));      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_read_casher_name)
{
    PNODE p1, n;
    char name[40];
    int ret;
    
    n=get_n_stacksvalue(get_current_stackd,0);
    ret=read_casher_name(get_n_longvalue(n), name);
    if(ret!=0){
      p1=FALSE;
    } else {
      p1=make_n_string(name);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_read_header_string)
{
    PNODE p1, n;
    char name[40];
    int ret;
    
    n=get_n_stacksvalue(get_current_stackd,0);
    ret=read_header_string(get_n_longvalue(n), name);
    if(ret!=0){
      p1=FALSE;
    } else {
      p1=make_n_string(name);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_read_taler_string)
{
    PNODE p1, n;
    char name[40];
    int ret;
    
    n=get_n_stacksvalue(get_current_stackd,0);
    ret=read_taler_string(get_n_longvalue(n), name);
    if(ret!=0){
      p1=FALSE;
    } else {
      p1=make_n_string(name);      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_escape)
{
    escape();
    return(0);
};

EXTFUNC(f_print_string)
{
    PNODE p1, p2;
    char name[40];
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);
    ret=print_string(get_n_stringvalue(p1),get_n_longvalue(p2));
    if(ret!=0){
      p1=FALSE;
    } else {
      p1=TRUE;      
    };
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_draw_line)
{
    PNODE p1, p2, p3;
    char name[40];
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    draw_line(get_n_stringvalue(p1),get_n_longvalue(p2),get_n_longvalue(p3));
    return(0);
};

EXTFUNC(f_global_error)
{
    PNODE p1;
    
    p1=make_n_string(global_packet_error);      
    push_n_stack(get_current_stackd,p1);
    return(1);
};
/*****************************************************************************************************/
EXTFUNC(f_command_01)
//чтение итогового-текущего отчета входных-нет
{
    PNODE p1;
    int n_kol_sym;                 //  количество оплат всего нал
    unsigned char  n_sym_sym [14+1]; // сумма оплат всего нал
    int  b_kol_sym;                // количество оплат всего безнал
    unsigned char  b_sym_sym [14+1]; // сумма оплат всего безнал
    int vz_n_kol;                  //кол-во возврат нал
    unsigned char  vz_n_sym [12+1];  //сумма возврата нал
    int  vz_b_kol;                 //кол-во возврат бнал
    unsigned char  vz_b_sym [12+1];  //сумма возврата бнал 
    unsigned char  vnec [12+1];
    unsigned char  vinic[14+1];
    int ret;
    
    ret=command_01(&n_kol_sym,n_sym_sym,&b_kol_sym,b_sym_sym,
                   &vz_n_kol,vz_n_sym,&vz_b_kol,vz_b_sym,vnec,vinic);
    if(ret!=0)  p1=FALSE;
    else 
     {
      p1=make_n_list(make_n_string(vinic),NIL);
      p1=make_n_list(make_n_string(vnec), p1);
      p1=make_n_list(make_n_string(vz_b_sym), p1);
      p1=make_n_list(make_n_long(vz_b_kol), p1);
      p1=make_n_list(make_n_string(vz_n_sym), p1);
      p1=make_n_list(make_n_long(vz_n_kol), p1);    
      p1=make_n_list(make_n_string(b_sym_sym), p1);
      p1=make_n_list(make_n_long(b_kol_sym), p1);
      p1=make_n_list(make_n_string(n_sym_sym), p1);
      p1=make_n_list(make_n_long(n_kol_sym), p1);
            
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_02_05)
//чтение отчета по отделу и по кассиру
// входные: 1-(номер команды 2-по отделу/5-по кассиру) 2-(номер отдела/кассира)
{
    PNODE p1,n1,n2;
    int n_kol_sym;                 //  количество оплат всего нал
    unsigned char  n_sym_sym [14+1]; // сумма оплат всего нал
    int  b_kol_sym;                // количество оплат всего безнал
    unsigned char  b_sym_sym [14+1]; // сумма оплат всего безнал
    int vz_n_kol;                  //кол-во возврат нал
    unsigned char  vz_n_sym [12+1];  //сумма возврата нал
    int  vz_b_kol;                 //кол-во возврат бнал
    unsigned char  vz_b_sym [12+1];  //сумма возврата бнал 
    int ret;
    

    n1=get_n_stacksvalue(get_current_stackd,1);
    n2=get_n_stacksvalue(get_current_stackd,0);
    ret=command_02_05(get_n_longvalue(n1),get_n_longvalue(n2),&n_kol_sym,n_sym_sym,&b_kol_sym,
		      b_sym_sym,&vz_n_kol,vz_n_sym,&vz_b_kol,vz_b_sym);
    
    if(ret!=0)  p1=FALSE;
    else 
     {     
      p1=make_n_list(make_n_string(vz_b_sym),NIL);
      p1=make_n_list(make_n_long(vz_b_kol), p1);
      p1=make_n_list(make_n_string(vz_n_sym), p1);
      p1=make_n_list(make_n_long(vz_n_kol), p1);    
      p1=make_n_list(make_n_string(b_sym_sym), p1);
      p1=make_n_list(make_n_long(b_kol_sym), p1);
      p1=make_n_list(make_n_string(n_sym_sym), p1);
      p1=make_n_list(make_n_long(n_kol_sym), p1);
            
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_06)
// отчет по нарастающему итогу входных нет
{
    PNODE p1;
    unsigned char All_itog_cash[18+1]; //нарастающий итог  
    int ret;
    
    ret= command_06( All_itog_cash);       
    if(ret!=0)  p1=FALSE;
    else 
     p1=make_n_string(All_itog_cash);   
                     
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_07)
//чтение настройки входных-нет
{
    PNODE p1;
    PT_cash_setting cs_l;
    int ret;

    cs_l=(PT_cash_setting)malloc(sizeof(T_cash_setting));
    ret=command_07(cs_l);   
    if(ret!=0)  p1=FALSE;
    else 
     {p1=make_n_list(make_n_string(cs_l->shluz),NIL);
      p1=make_n_list(make_n_string(cs_l->adr_serv), p1);      
      p1=make_n_list(make_n_string(cs_l->maska_set), p1);
      p1=make_n_list(make_n_string(cs_l->adr_kkm), p1);

      p1=make_n_list(make_n_long(cs_l->ts_nom_kkm), p1);     
      p1=make_n_list(make_n_long(cs_l->s_wait_net), p1); 
      p1=make_n_list(make_n_long(cs_l->razr_ls), p1);     
      p1=make_n_list(make_n_long(cs_l->s_flash_serv), p1); 
      p1=make_n_list(make_n_long(cs_l->com_ds), p1);     
      p1=make_n_list(make_n_long(cs_l->com_sk), p1); 
      p1=make_n_list(make_n_long(cs_l->com_gs), p1);     
      p1=make_n_list(make_n_long(cs_l->s_tim_bd), p1); 
      p1=make_n_list(make_n_long(cs_l->s_dt), p1);     
      p1=make_n_list(make_n_long(cs_l->otdel_po_um), p1); 
      p1=make_n_list(make_n_long(cs_l->max_sym_zapr), p1);     
      p1=make_n_list(make_n_long(cs_l->n_men_pr), p1); 
      p1=make_n_list(make_n_long(cs_l->n_admin), p1);     
      p1=make_n_list(make_n_long(cs_l->n_kassir), p1); 
      p1=make_n_list(make_n_long(cs_l->n_otdel), p1); 
      p1=make_n_list(make_n_string(cs_l->razr_otd), p1);
    
      p1=make_n_list(make_n_long(cs_l->tek_zap_kd), p1); 
      p1=make_n_list(make_n_long(cs_l->tek_read_kl), p1);     
      p1=make_n_list(make_n_long(cs_l->s_zap_kod), p1); 
      p1=make_n_list(make_n_long(cs_l->r_bd_towar), p1);     
      p1=make_n_list(make_n_long(cs_l->r_kl), p1); 
      p1=make_n_list(make_n_long(cs_l->r_ot_adm_pril), p1);     
      p1=make_n_list(make_n_long(cs_l->r_ot_adm_tz), p1); 
      p1=make_n_list(make_n_long(cs_l->r_ot_kassir), p1);     
      p1=make_n_list(make_n_long(cs_l->r_ot_otdel), p1); 
      p1=make_n_list(make_n_long(cs_l->s_d_tim), p1);     
      p1=make_n_list(make_n_long(cs_l->s_typ_srift), p1); 
      p1=make_n_list(make_n_long(cs_l->s_kass_oper), p1);     
      p1=make_n_list(make_n_long(cs_l->s_tset_on_off), p1); 
      p1=make_n_list(make_n_long(cs_l->type_magn_card), p1);     
      p1=make_n_list(make_n_long(cs_l->s_otd_upr), p1); 
      p1=make_n_list(make_n_long(cs_l->s_kod_otch), p1);  
      p1=make_n_list(make_n_long(cs_l->s_spd_sk), p1);   
      p1=make_n_list(make_n_long(cs_l->s_vn_ind), p1); 
      p1=make_n_list(make_n_long(cs_l->s_storno), p1);     
      p1=make_n_list(make_n_long(cs_l->s_typ_code), p1); 
      p1=make_n_list(make_n_long(cs_l->s_typ_shk), p1);     
      p1=make_n_list(make_n_long(cs_l->s_typ_cena), p1); 
      p1=make_n_list(make_n_long(cs_l->s_kod_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_prn_shk), p1); 
      p1=make_n_list(make_n_long(cs_l->s_ves), p1);     
      p1=make_n_list(make_n_long(cs_l->s_reg_kkm), p1); 
      p1=make_n_list(make_n_long(cs_l->s_pcz_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_typ_nlg), p1); 
      p1=make_n_list(make_n_long(cs_l->s_nal_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_bnc_on_off), p1); 
      p1=make_n_list(make_n_long(cs_l->s_bnk_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_dck_on_off), p1); 
      p1=make_n_list(make_n_long(cs_l->s_nck_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_skd_on_off), p1); 
      p1=make_n_list(make_n_long(cs_l->s_nlg_on_off), p1);     
      p1=make_n_list(make_n_long(cs_l->s_fis_sost), p1); 
      p1=make_n_list(make_n_long(cs_l->s_nalog_ins), p1); 
      p1=make_n_list(make_n_long(cs_l->s_open_close), p1); 
     
     }
    push_n_stack(get_current_stackd,p1);
    free(cs_l);
    return(1);
};
EXTFUNC(f_command_08)
//запись настройки входные (1-структура настроек)(2- флаг ккм flag_kkm=0 120 касса =1-500)
{
    PNODE p1,n2;
    PT_cash_setting cs_l;
    int ret;
    

    p1=get_n_stacksvalue(get_current_stackd,1);
    n2=get_n_stacksvalue(get_current_stackd,0);
    cs_l=(PT_cash_setting)malloc(sizeof(T_cash_setting));

      			    cs_l->s_open_close=get_n_longvalue(get_n_listcar(p1)); 
//     printf("s_open_close=%d\n",cs_l->s_open_close);
      p1=get_n_listcdr(p1); cs_l->s_nalog_ins=get_n_longvalue(get_n_listcar(p1)); 
//     printf("s_nalog_ins=%d\n",cs_l->s_nalog_ins);
      p1=get_n_listcdr(p1); cs_l->s_fis_sost=get_n_longvalue(get_n_listcar(p1)); 
//     printf("cs_l->s_fis_sost=%d\n",cs_l->s_fis_sost);
      p1=get_n_listcdr(p1); cs_l->s_nlg_on_off=get_n_longvalue(get_n_listcar(p1));
//     printf("cs_l->s_nlg_on_off=%d\n",cs_l->s_nlg_on_off);  
      p1=get_n_listcdr(p1); cs_l->s_skd_on_off=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_nck_on_off=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_dck_on_off=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_bnk_on_off=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_bnc_on_off=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_nal_on_off=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_typ_nlg=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_pcz_on_off=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_reg_kkm=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_ves=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_prn_shk=get_n_longvalue(get_n_listcar(p1)); 
// printf("cs_l->s_prn_shk=%d\n",cs_l->s_prn_shk);  
      p1=get_n_listcdr(p1); cs_l->s_kod_on_off=get_n_longvalue(get_n_listcar(p1)); 
// printf("cs_l->s_kod_on_off=%d\n",cs_l->s_kod_on_off);     
      p1=get_n_listcdr(p1); cs_l->s_typ_cena=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_typ_shk=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_typ_code=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_storno=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_vn_ind=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_spd_sk=get_n_longvalue(get_n_listcar(p1));   
      p1=get_n_listcdr(p1); cs_l->s_kod_otch=get_n_longvalue(get_n_listcar(p1));  
      p1=get_n_listcdr(p1); cs_l->s_otd_upr=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->type_magn_card=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_tset_on_off=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_kass_oper=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_typ_srift=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_d_tim=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->r_ot_otdel=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->r_ot_kassir=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->r_ot_adm_tz=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->r_ot_adm_pril=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->r_kl=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->r_bd_towar=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_zap_kod=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->tek_read_kl=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->tek_zap_kd=get_n_longvalue(get_n_listcar(p1)); 

      p1=get_n_listcdr(p1); strcpy(cs_l->razr_otd,get_n_stringvalue(get_n_listcar(p1)) );

      p1=get_n_listcdr(p1); cs_l->n_otdel=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->n_kassir=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->n_admin=get_n_longvalue(get_n_listcar(p1));         
      p1=get_n_listcdr(p1); cs_l->n_men_pr=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->max_sym_zapr=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->otdel_po_um=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->s_dt=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_tim_bd=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->com_gs=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->com_sk=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->com_ds=get_n_longvalue(get_n_listcar(p1));     
      p1=get_n_listcdr(p1); cs_l->s_flash_serv=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->razr_ls=get_n_longvalue(get_n_listcar(p1)); 
// printf("cs_l->razr_ls=%s\n",cs_l->razr_ls);     
      p1=get_n_listcdr(p1); cs_l->s_wait_net=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); cs_l->ts_nom_kkm=get_n_longvalue(get_n_listcar(p1)); 
    
      p1=get_n_listcdr(p1); strcpy(cs_l->adr_kkm,get_n_stringvalue(get_n_listcar(p1)) );
// printf("cs_l->adr_kkm=%s\n",cs_l->adr_kkm); 
      p1=get_n_listcdr(p1); strcpy(cs_l->maska_set,get_n_stringvalue(get_n_listcar(p1)) );
      p1=get_n_listcdr(p1); strcpy(cs_l->adr_serv,get_n_stringvalue(get_n_listcar(p1)) );      
      p1=get_n_listcdr(p1); strcpy(cs_l->shluz,get_n_stringvalue(get_n_listcar(p1)) );

    ret= command_08(cs_l, get_n_longvalue(n2)); 
    if(ret!=0)  p1=FALSE; 
    else p1=TRUE; 
     
    push_n_stack(get_current_stackd,p1);
    free(cs_l);
    return(1);
};

EXTFUNC(f_command_10)
// «апись даты и времени ¬ходные 1-дата[8+1] 2-врем€ [6+1]
{
    PNODE p1, p2;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_10(get_n_stringvalue(p1), get_n_stringvalue(p2));
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_14_23_25)
// «апись одного кассира/администратора/менеджера приложений
// ¬ходные: 1-номер команды (14,23,25), 2-номер кассира/администратора/менеджера приложений
//         3-им€ строка
{
    PNODE p1, p2,p3;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);

    ret= command_14_23_25(get_n_longvalue(p1),get_n_longvalue(p2),get_n_stringvalue(p3));
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_15_24_26_18)
// ќчистка Ѕƒ кассира/администратора/менеджера приложений/отделов
// ¬ходные: 1-номер команды (15,24,26,18), 2-номер кассира/администратора/менеджера приложений/отдела

{
    PNODE p1, p2;
    int ret;  
  
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_15_24_26_18(get_n_longvalue(p1),get_n_longvalue(p2));
    
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_11_12)
// „тение имени администратора/менеджера приложений
// ¬ходные: 1-номер команды (11,12), 2-номер администратора/менеджера приложений
// ¬ыходные им€
{
    PNODE p1, p2;
    unsigned char name[16+1];   
    int ret;  
  
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_11_12(get_n_longvalue(p1),get_n_longvalue(p2),name);
        
    if(ret!=0)   p1=FALSE;
    else         p1=make_n_string(name);        
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_16)
//чтение  отдела
// входные: 1-номер отдела
{
    PNODE p1,n1;
    unsigned char name[16+1];
    unsigned char flnalogi[3+1],flnalogo[3+1],flnaz[3+1],flskid[3+1],fldisc[3+1];   
    int ret; 
    
    n1=get_n_stacksvalue(get_current_stackd,0);

    ret= command_16(get_n_longvalue(n1),name,flnalogi,flnalogo,flnaz,flskid,fldisc);   
    
    if(ret!=0)  p1=FALSE;
    else 
     {     
      p1=make_n_list(make_n_string(fldisc),NIL);
      p1=make_n_list(make_n_string(flskid),p1);
      p1=make_n_list(make_n_string(flnaz),p1);
      p1=make_n_list(make_n_string(flnalogo),p1);
      p1=make_n_list(make_n_string(flnalogi),p1);
      p1=make_n_list(make_n_string(name),p1);    
            
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_17)
// «апись одного отдела
// ¬ходные: 1-номер отдела
//         
{
    PNODE p1,p2,p3,p4,p5,p6,p7;
    int ret;

    p1=get_n_stacksvalue(get_current_stackd,6);
    p2=get_n_stacksvalue(get_current_stackd,5);
    p3=get_n_stacksvalue(get_current_stackd,4);
    p4=get_n_stacksvalue(get_current_stackd,3);    
    p5=get_n_stacksvalue(get_current_stackd,2);
    p6=get_n_stacksvalue(get_current_stackd,1);
    p7=get_n_stacksvalue(get_current_stackd,0);

    ret= command_17(get_n_longvalue(p1),get_n_stringvalue(p2),get_n_stringvalue(p3),
                    get_n_stringvalue(p4),get_n_stringvalue(p5),get_n_stringvalue(p6),get_n_stringvalue(p7));
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_19)
//чтение  одной записи бд товаров
// входные: 1-номер записи 2- читать основной файл или дополнительный(дубл шк) 0-основной
{
    PNODE p1,n1,n2;
    char pdubl;
    char barcode[13+1],code[13+1];
    char name[32+1],cost[11];
    char flnalogi[3+1],flnalogo[3+1],flnaz[3+1],flskid[3+1],fldisc[3+1]; 
    /*s_*/int otdel;  
    char prop,name_prop,name_ext[32+1];    
    int ret; 

    n1=get_n_stacksvalue(get_current_stackd,1);    
    n2=get_n_stacksvalue(get_current_stackd,0);


    ret= command_19(get_n_longvalue(n1),get_n_longvalue(n2),&pdubl,barcode,code,name,
                    cost,flnalogi,flnalogo,flnaz,flskid,fldisc,&otdel,
                    &prop,&name_prop,name_ext);  
    
    if(ret!=0)  p1=FALSE;
    else 
     {  
      p1=make_n_list(make_n_string(name_ext),NIL); 
      p1=make_n_list(make_n_long(name_prop-48),p1); 
      p1=make_n_list(make_n_long(prop-48),p1); 
      p1=make_n_list(make_n_long(otdel),p1); 
      p1=make_n_list(make_n_string(fldisc),p1); 
      p1=make_n_list(make_n_string(flskid),p1); 
      p1=make_n_list(make_n_string(flnaz),p1);  
      p1=make_n_list(make_n_string(flnalogo),p1); 
      p1=make_n_list(make_n_string(flnalogi),p1);  
      p1=make_n_list(make_n_string(cost),p1);
      p1=make_n_list(make_n_string(name),p1);
      p1=make_n_list(make_n_string(code),p1);
      p1=make_n_list(make_n_string(barcode),p1);
      p1=make_n_list(make_n_long(pdubl-48),p1);
     
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_21)
// ќчистка Ѕƒ товаров
// ¬ходные: 1-код товара дл€ очистки(0000000000000-вс€ база) 2-(0-по Ў  1-код/арт) 
//          3- (0- подтверждение сразу 1- после)
{
    PNODE p1,p2,p3;
    int ret;

    
    p1=get_n_stacksvalue(get_current_stackd,2);
    p2=get_n_stacksvalue(get_current_stackd,1);
    p3=get_n_stacksvalue(get_current_stackd,0);
    
    ret= command_21(get_n_stringvalue(p1),get_n_longvalue(p2),get_n_longvalue(p3));

    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_29_31)
// «апись верхнего и нижнего заголовков
// ¬ходные: 1-номер команды(29/31) 2-номер строки 3-заголовок
//         
{
    PNODE p1,p2,p3;
    int ret;
//printf("11111\n");    
    p1=get_n_stacksvalue(get_current_stackd,2);
//printf("21111\n"); 
    p2=get_n_stacksvalue(get_current_stackd,1);
//printf("31111\n"); 
    p3=get_n_stacksvalue(get_current_stackd,0);
//printf("41111\n"); 
   
    ret= command_29_31(get_n_longvalue(p1),get_n_longvalue(p2),get_n_stringvalue(p3));
//printf("51111\n"); 
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
//printf("61111\n");     
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_32_33)
// ќчистка верхнего и нижнего заголовков
// ¬ходные: 1-номер команды(32/33) 2-номер строки

{
    PNODE p1,p2;
    int ret;    
  
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);    
   
    ret= command_32_33(get_n_longvalue(p1),get_n_longvalue(p2));

    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_39)
// чтение кол-во свободных записей фп
{
    PNODE p1;
    int kol_free_fp; 
    int ret;
    
    ret= command_39(&kol_free_fp); 
//printf("kol_free_fp=%d\n",kol_free_fp);      
    if(ret!=0)  p1=FALSE;
    else 
     p1=make_n_long(kol_free_fp);   
                     
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_41)
// чтение реквизиты
{
    PNODE p1;
    unsigned char verskkm[20+1]; //верси€ и дата
    int ret;
    
    ret= command_41(verskkm);    
    if(ret!=0)  p1=FALSE;
    else 
     p1=make_n_string(verskkm);   
//printf("verskkm=%s\n",verskkm);                    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_42)
//чтение  установок локальных штрих кодов
// входные: нет
{
    PNODE p1;   
    int f_lshk02;  // флаг  дл€ кода с 02 - 
    int f_lshk2;   // флаг дл€ кода с 2 -  
    int t_lshk02;  // тип кода расширени€ 
    int t_lshk2;   // тип кода расширени€ 
    int d_lshk02;   // длина пол€ расширени€ 
    int d_lshk2;    // длина пол€ расширени€ 
  
    int ret; 

    ret= command_42(&f_lshk02,&t_lshk02,&d_lshk02,&f_lshk2,&t_lshk2,&d_lshk2);
//printf("f_lshk02=%d\n",f_lshk02);       
    if(ret!=0)  p1=FALSE;
    else 
     {       
      p1=make_n_list(make_n_long(d_lshk2),NIL);     
      p1=make_n_list(make_n_long(t_lshk2),p1);
      p1=make_n_list(make_n_long(f_lshk2),p1);  
      p1=make_n_list(make_n_long(d_lshk02),p1); 
      p1=make_n_list(make_n_long(t_lshk02),p1); 
      p1=make_n_list(make_n_long(f_lshk02),p1);
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_43)
// «апись установок локальных штрих кодов
//         
{
    PNODE p1,p2,p3,p4,p5,p6;
    int ret;

    p1=get_n_stacksvalue(get_current_stackd,5);
    p2=get_n_stacksvalue(get_current_stackd,4);    
    p3=get_n_stacksvalue(get_current_stackd,3);
    p4=get_n_stacksvalue(get_current_stackd,2);
    p5=get_n_stacksvalue(get_current_stackd,1);
    p6=get_n_stacksvalue(get_current_stackd,0);
   
    ret= command_43(get_n_longvalue(p1),get_n_longvalue(p2),get_n_longvalue(p3),get_n_longvalue(p4),
                    get_n_longvalue(p5),get_n_longvalue(p6));

    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_44_93)
// ќчистка установок лок Ў /артикула
// ¬ходные: 1-номер команды(44/93) 

{
    PNODE p1;
    int ret;      
  
    p1=get_n_stacksvalue(get_current_stackd,0);    
  
    ret= command_44_93(get_n_longvalue(p1));
   
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);

};
EXTFUNC(f_command_91)
//чтение устновок артикула
{
    PNODE p1;
    PT_cash_artikl ca_l;
    int ret;

    ca_l=(PT_cash_artikl)malloc(sizeof(T_cash_artikl));
    ret= command_91(ca_l);  

    if(ret!=0)  p1=FALSE;
    else 
     {p1=make_n_list(make_n_string(ca_l->artikl_name5),NIL);
      p1=make_n_list(make_n_string(ca_l->artikl_name4), p1);      
      p1=make_n_list(make_n_string(ca_l->artikl_name3), p1);
      p1=make_n_list(make_n_string(ca_l->artikl_name2), p1);
      p1=make_n_list(make_n_string(ca_l->artikl_name1), p1);

      p1=make_n_list(make_n_long(ca_l->artikl_pol5), p1);     
      p1=make_n_list(make_n_long(ca_l->artikl_pol4), p1); 
      p1=make_n_list(make_n_long(ca_l->artikl_pol3), p1);     
      p1=make_n_list(make_n_long(ca_l->artikl_pol2), p1); 
      p1=make_n_list(make_n_long(ca_l->artikl_pol1), p1);     
      p1=make_n_list(make_n_long(ca_l->artikl_kol), p1);         
     }
    push_n_stack(get_current_stackd,p1);
    free(ca_l);
    return(1);
};
EXTFUNC(f_command_92)
//запись устновок артикула
{
    PNODE p1;
    PT_cash_artikl ca_l;
    int ret;
   

      p1=get_n_stacksvalue(get_current_stackd,0);

      ca_l=(PT_cash_artikl)malloc(sizeof(T_cash_artikl));

      			    ca_l->artikl_kol=get_n_longvalue(get_n_listcar(p1)); 

      p1=get_n_listcdr(p1); ca_l->artikl_pol1=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); ca_l->artikl_pol2=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); ca_l->artikl_pol3=get_n_longvalue(get_n_listcar(p1));
      p1=get_n_listcdr(p1); ca_l->artikl_pol4=get_n_longvalue(get_n_listcar(p1)); 
      p1=get_n_listcdr(p1); ca_l->artikl_pol5=get_n_longvalue(get_n_listcar(p1));    
    
      p1=get_n_listcdr(p1); strcpy(ca_l->artikl_name1,get_n_stringvalue(get_n_listcar(p1)) );
      p1=get_n_listcdr(p1); strcpy(ca_l->artikl_name2,get_n_stringvalue(get_n_listcar(p1)) );
      p1=get_n_listcdr(p1); strcpy(ca_l->artikl_name3,get_n_stringvalue(get_n_listcar(p1)) );      
      p1=get_n_listcdr(p1); strcpy(ca_l->artikl_name4,get_n_stringvalue(get_n_listcar(p1)) );
      p1=get_n_listcdr(p1); strcpy(ca_l->artikl_name5,get_n_stringvalue(get_n_listcar(p1)) );

    ret= command_92(ca_l);
    if(ret!=0)  p1=FALSE; 
    else p1=TRUE; 
     
    push_n_stack(get_current_stackd,p1);
    free(ca_l);
    return(1);
};
EXTFUNC(f_command_45)
//чтение  заводского номера и атрибутов
// входные: нет
{
    PNODE p1; 
    unsigned char    num_kkm[8+1]; /* «аводской номер кассы    */
    unsigned char    inn_kkm[12+1]; /* Ќомер »ЌЌ владельца      */
    unsigned char    reg_kkm[8+1];  /* регистрационный номер    */  
   
    int ret; 

    ret= command_45(num_kkm,inn_kkm,reg_kkm);  
    
    if(ret!=0)  p1=FALSE;
    else 
     {     
      p1=make_n_list(make_n_string(reg_kkm),NIL);
      p1=make_n_list(make_n_string(inn_kkm),p1); 
      p1=make_n_list(make_n_string(num_kkm),p1);         
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_46)
// чтение текущего номера эл журнала
{
    PNODE p1;
    int nom_magazin; 
    int ret;  
 
    ret= command_46(&nom_magazin);   
    if(ret!=0)  p1=FALSE;
    else 
     p1=make_n_long(nom_magazin);   
                     
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_60_61_62_63_64)
//чтение отчета и бд наценок/скидок/дисконта/налог нач/налог вкл
// входные: 1-(номер команды 60/61/62/63/64) 2-(номер наценок/скидок/дисконта/налог нач/налог вкл)
{
    PNODE p1,n1,n2;

    unsigned char  bd_nam   [16+1]; // наименование налога, наценки, скидки, дисконта 
    unsigned char  bd_proc [4+1]; // процент налога, скидки, наценки 
    unsigned char  bd_summa    [12+1]; // сумма ...... 
    int  bd_kolich;     // количество ..... 
  
    int ret;
    
    n1=get_n_stacksvalue(get_current_stackd,1);
    n2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_60_61_62_63_64(get_n_longvalue(n1),get_n_longvalue(n2),bd_nam,bd_proc,bd_summa,&bd_kolich);
    
    if(ret!=0)  p1=FALSE;
    else 
     {     
      p1=make_n_list(make_n_long(bd_kolich),NIL);
      p1=make_n_list(make_n_string(bd_summa), p1);
      p1=make_n_list(make_n_string(bd_proc), p1);       
      p1=make_n_list(make_n_string(bd_nam), p1);        
                
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_65_66_67_68_69)
// ќчистка бд наценок/скидок/дисконта/налог нач/налог вкл
// входные: 1-(номер команды 65/66/67/68/69) 2-(номер наценок/скидок/дисконта/налог нач/налог вкл)        
{
    PNODE p1,p2;
    int ret;

   
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_65_66_67_68_69(get_n_longvalue(p1),get_n_longvalue(p2));   
   
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_70_71_72_73_74)
// «апись бд наценок/скидок/дисконта/налог нач/налог вкл
// входные: 1-(номер команды 70/71/72/73/74) 2-(номер наценок/скидок/дисконта/налог нач/налог вкл)  
//          3-им€(строка16) 4-процент(строка 4)         
{
    PNODE p1,p2,p3,p4;
    int ret;
      
    p1=get_n_stacksvalue(get_current_stackd,3);
    p2=get_n_stacksvalue(get_current_stackd,2);
    p3=get_n_stacksvalue(get_current_stackd,1);
    p4=get_n_stacksvalue(get_current_stackd,0);
  
    ret= command_70_71_72_73_74(get_n_longvalue(p1),get_n_longvalue(p2),get_n_stringvalue(p3),
                                get_n_stringvalue(p4)); 
    
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_20_22)
// ƒобавление/«апись одного товара
// ¬ходные: 1-номер команды(20/22)
//         
{
    PNODE p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17;
    int ret;

    p1=get_n_stacksvalue(get_current_stackd,16);
    p2=get_n_stacksvalue(get_current_stackd,15);
    p3=get_n_stacksvalue(get_current_stackd,14);
    p4=get_n_stacksvalue(get_current_stackd,13);
    p5=get_n_stacksvalue(get_current_stackd,12);
    p6=get_n_stacksvalue(get_current_stackd,11);
    p7=get_n_stacksvalue(get_current_stackd,10);
    p8=get_n_stacksvalue(get_current_stackd,9);
    p9=get_n_stacksvalue(get_current_stackd,8);
    p10=get_n_stacksvalue(get_current_stackd,7);
    p11=get_n_stacksvalue(get_current_stackd,6);
    p12=get_n_stacksvalue(get_current_stackd,5);
    p13=get_n_stacksvalue(get_current_stackd,4);
    p14=get_n_stacksvalue(get_current_stackd,3);    
    p15=get_n_stacksvalue(get_current_stackd,2);
    p16=get_n_stacksvalue(get_current_stackd,1);
    p17=get_n_stacksvalue(get_current_stackd,0);


    ret= command_20_22(get_n_longvalue(p1), get_n_longvalue(p2),get_n_longvalue(p3),get_n_longvalue(p4),
                       get_n_stringvalue(p5), get_n_stringvalue(p6), get_n_stringvalue(p7),
                       get_n_stringvalue(p8), get_n_stringvalue(p9), get_n_stringvalue(p10),
                       get_n_stringvalue(p11), get_n_stringvalue(p12), get_n_stringvalue(p13),
                       get_n_stringvalue(p14), get_n_longvalue(p15), get_n_longvalue(p16),
                       get_n_stringvalue(p17));
    
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_47)
// чтение текущего кол-ва записей эл журнала и текущего указател€ выгрузки
{
    PNODE p1;    
    int ret;
  
    ret= read_number_journal();
    
    if(ret!=0)  p1=FALSE;
    else 
     {
      p1=make_n_list(make_n_long(sale_of_num_pos),NIL);
      p1=make_n_list(make_n_long(sale_of_num),p1); 
             
     }
                     
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_49)
// чтение заданной записи эл журнала 
{
    PNODE p1,n1;    
    int ret;

    n1=get_n_stacksvalue(get_current_stackd,0);
    ret= read_cash_result(get_n_longvalue(n1));  
   
    
    if(ret!=0)  p1=FALSE;
    else 
     {
      p1=make_n_list(make_n_string(record_prop1_e),NIL);
      p1=make_n_list(make_n_string(purchase_discount_ext4),p1); 
      p1=make_n_list(make_n_string(purchase_discount_ext3),p1); 
      p1=make_n_list(make_n_string(purchase_discount_ext2),p1); 
      p1=make_n_list(make_n_string(purchase_discount_ext1),p1); 
      p1=make_n_list(make_n_string(purchase_discount_ext4),p1); 
      p1=make_n_list(make_n_string(purchase_charge),p1); 
      p1=make_n_list(make_n_string(purchase_discount),p1); 
      p1=make_n_list(make_n_string(purchase_tax_o),p1); 
      p1=make_n_list(make_n_string(purchase_tax_i),p1); 
      p1=make_n_list(make_n_string(purchase_qty_e),p1); 
      p1=make_n_list(make_n_string(purchase_prop_e),p1); 
      p1=make_n_list(make_n_string(purchase_cost),p1); 
      p1=make_n_list(make_n_string(record_check_e),p1); 
      p1=make_n_list(make_n_string(purchase_code),p1); 
      p1=make_n_list(make_n_string(record_casher_e),p1); 
      p1=make_n_list(make_n_string(record_branch_e),p1); 
      p1=make_n_list(make_n_string(purchase_summa),p1); 
      p1=make_n_list(make_n_string(record_time),p1); 
      p1=make_n_list(make_n_string(record_date),p1); 
      p1=make_n_list(make_n_string(purchase_num_e),p1); 
      p1=make_n_list(make_n_string(record_prop),p1); 
      p1=make_n_list(make_n_long(sale_of_num),p1);  
           
     }
                     
    push_n_stack(get_current_stackd,p1);
    return(1);
};
EXTFUNC(f_command_34)
//чтение  б/н заголовков
// входные: нет
{

    PNODE p1; 
    unsigned char    bnopl_zag[24+1]; /* заголовок б/н оплаты   */
    unsigned char    bnvozvr_zag[24+1]; /* заголовок б/н возвраты */
   
    int ret; 

    ret= command_34(bnopl_zag,bnvozvr_zag);  
    
    if(ret!=0)  p1=FALSE;
    else 
     {     
      p1=make_n_list(make_n_string(bnvozvr_zag),NIL);
      p1=make_n_list(make_n_string(bnopl_zag),p1); 
              
     }
    push_n_stack(get_current_stackd,p1);
    return(1);
};

EXTFUNC(f_command_35)
// «апись б/н заголовков
{
    PNODE p1, p2;
    int ret;
    
    p1=get_n_stacksvalue(get_current_stackd,1);
    p2=get_n_stacksvalue(get_current_stackd,0);

    ret= command_35(get_n_stringvalue(p1), get_n_stringvalue(p2));
    if(ret!=0)   p1=FALSE;
    else         p1=TRUE;      
    
    push_n_stack(get_current_stackd,p1);
    return(1);
};

//*****************************************************************************************
void set_n_extfunc(char *f,PNODE fn);
PNODE make_n_extfunc(void * f);


void load_em_extfunction(void)
{
// функции
#ifdef _DEBUG
    printf("load_em_extfunction begin ");
#endif
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
    set_n_extfunc("beep",make_n_extfunc(f_beep));
    set_n_extfunc("wait_cash",make_n_extfunc(f_wait_cash));
    set_n_extfunc("get_card_cash",make_n_extfunc(f_get_card_cash));
    set_n_extfunc("get_char_cash",make_n_extfunc(f_get_char_cash));
    set_n_extfunc("read_date_time",make_n_extfunc(f_read_date_time));
    set_n_extfunc("read_casher_name",make_n_extfunc(f_read_casher_name));
    set_n_extfunc("read_header_string",make_n_extfunc(f_read_header_string));
    set_n_extfunc("read_taler_string",make_n_extfunc(f_read_taler_string));
    set_n_extfunc("escape",make_n_extfunc(f_escape));
    set_n_extfunc("print_string",make_n_extfunc(f_print_string));
    set_n_extfunc("draw_line",make_n_extfunc(f_draw_line));
    set_n_extfunc("create_menu",make_n_extfunc(f_create_menu));
    set_n_extfunc("add_menu_item",make_n_extfunc(f_add_menu_item));
    set_n_extfunc("exec_menu",make_n_extfunc(f_exec_menu));
    set_n_extfunc("last_error",make_n_extfunc(f_global_error));
    set_n_extfunc("end_pay_card",make_n_extfunc(f_end_pay_card));
    set_n_extfunc("end_weigh",make_n_extfunc(f_end_weigh));
    set_n_extfunc("end_discont",make_n_extfunc(f_end_discont));

    set_n_extfunc("dbfOpen",make_n_extfunc(f_dbfOpen));
    set_n_extfunc("dbfClose",make_n_extfunc(f_dbfClose));
		set_n_extfunc("dbfGotoRecord",make_n_extfunc(f_dbfGotoRecord));
		set_n_extfunc("dbfSaveRecord",make_n_extfunc(f_dbfSaveRecord));
		set_n_extfunc("dbfReadRecord",make_n_extfunc(f_dbfReadRecord));
		set_n_extfunc("dbfGetField",make_n_extfunc(f_dbfGetField));
		set_n_extfunc("dbfPutField",make_n_extfunc(f_dbfPutField));
		set_n_extfunc("dbfNewRecord",make_n_extfunc(f_dbfNewRecord));
		set_n_extfunc("dbfDelRecord",make_n_extfunc(f_dbfDelRecord));
		set_n_extfunc("dbfPack",make_n_extfunc(f_dbfPack));
		set_n_extfunc("dbfGetLastRecord",make_n_extfunc(f_dbfGetLastRecord));
		set_n_extfunc("dbfAskRecordStructure",make_n_extfunc(f_dbfAskRecordStructure));

    set_n_extfunc("fileOpen",make_n_extfunc(f_fileOpen));
    set_n_extfunc("fileClose",make_n_extfunc(f_fileClose));
    set_n_extfunc("fileRead",make_n_extfunc(f_fileRead));
    set_n_extfunc("fileWrite",make_n_extfunc(f_fileWrite));
    set_n_extfunc("fileGetSize",make_n_extfunc(f_fileGetSize));

    set_n_extfunc("OpenPort",make_n_extfunc(f_OpenPort));
    set_n_extfunc("ClosePort",make_n_extfunc(f_ClosePort));
    set_n_extfunc("SetBaud",make_n_extfunc(f_SetBaud));
    set_n_extfunc("ReceiveString",make_n_extfunc(f_ReceiveString));
    set_n_extfunc("SendString",make_n_extfunc(f_SendString));
    set_n_extfunc("LoadString",make_n_extfunc(f_LoadString));
    set_n_extfunc("SaveString",make_n_extfunc(f_SaveString));
    set_n_extfunc("sleep",make_n_extfunc(f_sleep));

    set_n_extfunc("command_01",make_n_extfunc(f_command_01));
    set_n_extfunc("command_02_05",make_n_extfunc(f_command_02_05));
    set_n_extfunc("command_06",make_n_extfunc(f_command_06));
    set_n_extfunc("command_07",make_n_extfunc(f_command_07));
    set_n_extfunc("command_08",make_n_extfunc(f_command_08));
    set_n_extfunc("command_10",make_n_extfunc(f_command_10));
    set_n_extfunc("command_14_23_25",make_n_extfunc(f_command_14_23_25));
    set_n_extfunc("command_15_24_26_18",make_n_extfunc(f_command_15_24_26_18));
    set_n_extfunc("command_15_18",make_n_extfunc(f_command_15_24_26_18));
    set_n_extfunc("command_11_12",make_n_extfunc(f_command_11_12));
    set_n_extfunc("command_16",make_n_extfunc(f_command_16));
    set_n_extfunc("command_17",make_n_extfunc(f_command_17));
    set_n_extfunc("command_19",make_n_extfunc(f_command_19));
    set_n_extfunc("command_21",make_n_extfunc(f_command_21));
    set_n_extfunc("command_29_31",make_n_extfunc(f_command_29_31));
    set_n_extfunc("command_32_33",make_n_extfunc(f_command_32_33));
    set_n_extfunc("command_39",make_n_extfunc(f_command_39));
    set_n_extfunc("command_41",make_n_extfunc(f_command_41));
    set_n_extfunc("command_42",make_n_extfunc(f_command_42));
    set_n_extfunc("command_43",make_n_extfunc(f_command_43));
    set_n_extfunc("command_44_93",make_n_extfunc(f_command_44_93));
    set_n_extfunc("command_91",make_n_extfunc(f_command_91));
    set_n_extfunc("command_92",make_n_extfunc(f_command_92));
    set_n_extfunc("command_45",make_n_extfunc(f_command_45));
    set_n_extfunc("command_46",make_n_extfunc(f_command_46));
    set_n_extfunc("command_60_61_62_63_64",make_n_extfunc(f_command_60_61_62_63_64));
    set_n_extfunc("command_60_64",make_n_extfunc(f_command_60_61_62_63_64));
    set_n_extfunc("command_65_66_67_68_69",make_n_extfunc(f_command_65_66_67_68_69));
    set_n_extfunc("command_65_69",make_n_extfunc(f_command_65_66_67_68_69));
    set_n_extfunc("command_70_74",make_n_extfunc(f_command_70_71_72_73_74));
    set_n_extfunc("command_70_71_72_73_74",make_n_extfunc(f_command_70_71_72_73_74));
    set_n_extfunc("command_20_22",make_n_extfunc(f_command_20_22));
    set_n_extfunc("command_47",make_n_extfunc(f_command_47));
    set_n_extfunc("command_49",make_n_extfunc(f_command_49));
    set_n_extfunc("command_34",make_n_extfunc(f_command_34));
    set_n_extfunc("command_35",make_n_extfunc(f_command_35));

    set_n_extfunc("OpenTradePort",make_n_extfunc(f_OpenTradePort));
    set_n_extfunc("CloseTradePort",make_n_extfunc(f_CloseTradePort));
    set_n_extfunc("SendTradeString",make_n_extfunc(f_SendTradeString));
    set_n_extfunc("ReceiveTradeString",make_n_extfunc(f_ReceiveTradeString));

    set_n_extfunc("get_interrupt_cash",make_n_extfunc(f_get_interrupt_cash));
    set_n_extfunc("wait_event",make_n_extfunc(f_wait_event));
    set_n_extfunc("_strcat",make_n_extfunc(cmp_strcat));

   



//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
//    set_n_extfunc("",make_n_extfunc());
};
#endif

void set_n_extfunc(char *f,PNODE fn)
{
    PNODE p, ps, n;

#ifdef _DEBUG
    printf("set_n_extfunc begin    ");
#endif
    pool_count_up(fn);
//    printf("1 ");
    ps=get_global_symbol;
//    print(ps);
//    printf("2 ");
    n=get_n_envexts(ps,f);
//    printf("3 ");
    if(n==0) {
        push_n_stack(get_current_stackd,fn);
//    printf("4 ");
        n=make_n_symbol(f);
//    printf("5 ");
        push_n_stack(get_current_stackd,n);
//    printf("6 ");
        add_n_envext(ps,n,NIL);
//        print(ps);
//    printf("7 ");
        n=pop_n_stack(get_current_stackd);
//    printf("8 ");
        fn=pop_n_stack(get_current_stackd);
//    printf("9 ");
    };
//    printf("10 ");
    p=get_global_extfunc;
    add_n_envext(p,n,fn);
    pool_count_down(fn);
#ifdef _DEBUG
    printf("set_n_extfunc end\r\n");
#endif
};

PNODE make_n_extfunc(void * f)
{
   PNODE ret;
   unsigned int l;

   l=(unsigned int)(f);
   ret=make_n_long(l);
   return(ret);
};

void load_extfunction(void)
{
// printf("функции");
// функции
#ifdef _DEBUG
    printf("load_extfunction begin ");
#endif
    set_n_extfunc("print",make_n_extfunc(print_ext));
//printf("print - loaded  ");
    set_n_extfunc("princ",make_n_extfunc(princ_ext));
//printf("princ - loaded  ");
    set_n_extfunc("get_string",make_n_extfunc(get_string));
    set_n_extfunc("cmp_string",make_n_extfunc(cmp_string));
    set_n_extfunc("stat_info",make_n_extfunc(stat_info_));
    set_n_extfunc("gc",make_n_extfunc(gc_));
    set_n_extfunc("load_obl",make_n_extfunc(load_func_));
    set_n_extfunc("get_func_num_arg",make_n_extfunc(get_func_num_arg));
    set_n_extfunc("print_stack_ptr",make_n_extfunc(print_stack_ptr));
    set_n_extfunc("string_to_list",make_n_extfunc(string_to_list));
    set_n_extfunc("_debug",make_n_extfunc(_debug));
    set_n_extfunc("gc",make_n_extfunc(_gc));

/*
    set_n_extfunc("print_stack",make_n_extfunc(printstack_ext));
    set_n_extfunc("eprint",make_n_extfunc(eprint_ext));
*/
    set_n_extfunc("_clear_stack_to_label",make_n_extfunc(_clear_stack_to_label));
//    set_n_extfunc("getchar",make_n_extfunc(__getchar));
    set_n_extfunc("get_func_num_arg",make_n_extfunc(get_func_num_arg));
/*
    set_n_extfunc("_save_struct",make_n_extfunc(_save_struct));
    set_n_extfunc("_load_struct",make_n_extfunc(_load_struct));
    set_n_extfunc("_get_pnode",make_n_extfunc(get_pnode_arg));
    set_n_extfunc("_end_application",make_n_extfunc(end_application));

    set_n_extfunc("get_time",make_n_extfunc(get_time));
    set_n_extfunc("get_date",make_n_extfunc(get_date));

    set_n_extfunc("msgbox",make_n_extfunc(msgbox));
*/

// пр€мой доступ
    set_n_extfunc("plus_number",make_n_extfunc(plus_number));
    set_n_extfunc("minus_number",make_n_extfunc(minus_number));
    set_n_extfunc("inc_number",make_n_extfunc(inc_number));
    set_n_extfunc("dec_number",make_n_extfunc(dec_number));
    set_n_extfunc("get_item_by_num",make_n_extfunc(get_item_by_num));
    set_n_extfunc("set_item_by_num",make_n_extfunc(set_item_by_num));
    set_n_extfunc("get_slot_num",make_n_extfunc(get_slot_num));
    set_n_extfunc("get_value_item_by_num",make_n_extfunc(get_value_item_by_num));
    set_n_extfunc("get_name_item_by_num",make_n_extfunc(get_name_item_by_num));


    // convertion
    set_n_extfunc("integer",make_n_extfunc(Integer));
//    set_n_extfunc("float",make_n_extfunc(Float));
    set_n_extfunc("string",make_n_extfunc(String));
    set_n_extfunc("symbol",make_n_extfunc(Symbol));
#ifdef EXTMOD
    load_em_extfunction();
#endif

/*
#ifdef EXTERNAL_FUNC
#ifdef EXTERNAL_FUNC_BRIDGE
    load_bridgefunction();
#endif
#ifdef EXTERNAL_FUNC_SQL
    load_sqlfunction();
#endif
#ifdef EXTERNAL_FUNC_STORKII
    load_storkiifunction();
#endif
//    load_adjustmentfunction();
#endif
// printf("прерывани€");
// прерывани€
    add_n_interruptl(get_global_inter, ERROR_INVALID_TYPE, make_n_extfunc(int_1_ext));
    add_n_interruptl(get_global_inter, ERROR_DIVIDE_BY_ZERO, make_n_extfunc(int_2_ext));
    add_n_interruptl(get_global_inter, ERROR_BAD_COMMAND, make_n_extfunc(int_3_ext));
    add_n_interruptl(get_global_inter, ERROR_DSTACK_OVERFLOW, make_n_extfunc(int_4_ext));
*/
};

#ifdef __BORLANDC__
#ifdef _WIN
#else

#endif
#endif

void write_byte(unsigned char b)
{
#ifdef __BORLANDC__
#ifdef _WIN
void window1_print(char * str);
void window1_print_byte(char ch);
#else
   putch(b);
#endif
#else
#ifdef __LINUX
   putchar(b);
#else
   uart0Putch(b);
#endif
#endif
};

/*
void ttt()
{
   char sss[256];

   sprintf(sss,">> %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d\r\n",N_SYMBOL,N_LONG,N_FLOAT,N_STRING,N_STACKP,N_CONS,N_ENV,N_TUPLE,N_STACK,N_FRAME,N_FUNC,N_CLOS);
   win_printf(sss);
};
*/

void vm_init(void)
{
   int i;
   PNODE p,t;

#ifndef __BORLANDC__
//    init_lpc();
#endif

#ifdef _DEBUG
    printf("vm_init begin  ");
#endif

//    memcreate(memfull(), 1);

// worked!!!   memcreate(4550, 1);

//    memcreate(8770, 1);
//    memcreate(9000, 1);

//    memcreate(10000, 1);
//    memcreate(20000, 1);

//    memcreate(65535, 1);

//    memcreate(256*1024, 1);
    memcreate(512*1024, 1);
//    memcreate(2048*1024, 1);
printf("Memcreate ");
    NIL=make_n_symbol("nil");
printf("create nil ");
    pool_count_always(NIL);
    make_gtree_root();
printf("make_gtree_root ");

    add_n_envext(get_global_symbol,NIL,NIL);
printf("add_n_envext ");
    TRUE=make_global_symbol("true");
    pool_count_always(TRUE);
printf("create true ");
    FALSE=make_global_symbol("false");
    pool_count_always(FALSE);
printf("create false ");
    SLABEL=make_global_symbol("#(@$%^&*)#");
    pool_count_always(SLABEL);
printf("create slabel ");
    initialize_loop(STACK_SIZE,STACK_SIZE);
printf("initialize_loop ");

//    gc();

    load_extfunction();
//printf("load_extfunction ");
//    load_extfunction_int();
//printf("load_extfunction_int ");
    gc();
    flag_stat=0;
#ifdef _DEBUG
    printf("vm_init end\n");
#endif
};

#ifdef USE_FLASH_FS
//static char fbuffer[10*1024];

void load_file(char *name)
{
    char *fbuffer;
    int len;
    len=ftell_file_on_flash(name);
//printf("> '%s' len=%d\r\n",name,len);
    if(len>0){
     fbuffer=(char *)malloc(len);
     if (read_file_from_flash(name,fbuffer,len)>0) {

//print_buf(fbuffer,len);
       load_function_string(fbuffer,name);
     };
     free(fbuffer);
    };
};
#else
void load_file(char *name)
{
    char *buffer;
    int len;
//printf("> %s\r\n",name);
    FILE *f=fopen(name,"rb");
    if(f!=NULL){
     fseek(f,0,SEEK_END);
     len=ftell(f);
     fseek(f,0,SEEK_SET);
     buffer=(char *)malloc(len);
     fread(buffer,len,1,f);
     fclose(f);
     load_function_string(buffer,name);
     free(buffer);
    };
};
#endif


// обратный разбор пути
char *back_path(char * path, char *str, int len_str)
{
int i, len, flag=0;
char * res;

  len=strlen(path);
  for(i=len;i>0;i--){
     if(path[i]=='.'){
        flag=1;
        break;
     };
     if(path[i]=='/'){
        flag=2;
        break;
     };
     if(path[i]=='\\'){
        flag=2;
        break;
     };
  };
  if(flag==1){
     // расширение есть - мен€ем
#ifdef __LINUX
     memset(str,0,len_str);
#else
     strnset(str,0,len_str);
#endif
     strncpy(str,path,i+1);
     strncpy(str+i+1,"obl",3);
     str[i+4]=0;
  } else if(flag==2){
#ifdef __LINUX
     memset(str,0,len_str);
#else
     strnset(str,0,len_str);
#endif
     strncpy(str,path,len);
     strncpy(str+len+1,".obl",4);
     str[len+5]=0;
  };
  res=str;
  return res;
};

//#ifdef LOAD_PROJECT
int load_prj(char *buff)
{
char b[255];
char c[255+1], *d;
int res, i, j, flag;

   i=0;
   flag=0;
   res=0;
p:
   if(buff[i]) {
     if(buff[i]=='*'){
       j=0;
       flag=1;
       res=1;
     } else {
       if(flag){
         if(buff[i]=='\r'){
           b[j]=0;
//           win_printf("%s\r\n", b);
           d=back_path(b, c, 255);
           win_printf("Loading %s\r\n", d);
           load_file(d);
           j=0;
           flag=0;
         } else {
           b[j]=buff[i];
           j++;
         };
       };
     };
     i++;
     goto p;
   };
   return(res);
};
//#endif

#ifdef USE_FLASH_FS
int load_prj_file(char *name)
{
  char *buffer;
  int len, res=0;     

  len=ftell_file_on_flash(name);
  if (len>0) {
    buffer=(char *)malloc(len);
    if (read_file_from_flash(name,buffer,len)>0) {
      res=load_prj(buffer);
    } else {
      res=-3;
    };
    free(buffer);
  } else {
    res=-2;
  };
  return(res);
};
#else

int load_prj_file(char *name)
{
    char *buffer;
    int len, res=0;     
    FILE *f=fopen(name,"rb");
    if(f!=NULL){
     fseek(f,0,SEEK_END);
     len=ftell(f);
     fseek(f,0,SEEK_SET);
     buffer=(char *)malloc(len);
     fread(buffer,len,1,f);
     fclose(f);
     res=load_prj(buffer);
     free(buffer);
    };
    return(res);
};
#endif

void function_load(int flag, char * name, char *buff)
{
   PNODE l1, l2, l3;
   int res;

#ifdef _DEBUG
    printf("function_load begin \n");
#endif
#ifdef _LOAD_LIB
    function_tuple();
    function_list_map();
    function_predic();
    function_list_func();
    function_frame_func();
#endif

#ifdef _DEBUG
    printf("function_load: load lib \n");
#endif

//    buffer=AKKER;
//    buffer=r_e_p;

//    buffer=worder_lib;
//    load_function_string(buffer,"worder_lib.obl");
    if(flag){
#ifdef __LINUX
         res=load_prj_file(name);
//printf("load project : %d\n",res);
         if(res==0){
//printf("loading file %d\n",name[0]);
            load_file(name);
         };
#else
         res=load_prj(buff);
         if(res==0){
            load_function_string(buff,name);
         };
#endif
    } else {
//       buffer=read_eval_print;
//       load_function_string(buffer,"div.obl");
    };
#ifdef _DEBUG
    printf("function_load main load \n");
#endif
    gc();

#ifdef _DEBUG
    printf("function_load end\n");
#endif
//    memdelete();
#ifndef __BORLANDC__
#ifndef __LINUX
 for(;;){};
#endif
#endif
//    return 0;
};

int ptr_find_next_name;

char * find_next_name(char *bname, int flag)
{

char *fname=NULL;
int cnt=0;

   if(flag==1){
     fname=0;
     ptr_find_next_name=0;
   } else {
     while(cnt<1000) {
       cnt++;
        fname=find_n_envexts(get_global_func, ptr_find_next_name);
        ptr_find_next_name++; 
        if(fname==0L){
           break;
        } else {
           if(strncmp(fname,bname,strlen(bname))==0){
              cnt=1001;
              break;
           };
        };
     };
   };
   return (fname);
};

int value_return(int set)
{
  PNODE l1, l2, l3;
  int res=0;

  l1=pop_n_stack(get_current_stackd);
  switch(set){
     case 1:
       l2=get_n_listcar(l1); 
       global_register_slot_name=get_n_stringvalue(l2);
       l1=get_n_listcdr(l1);  
       l2=get_n_listcar(l1); 
       global_register_slot_id=get_n_stringvalue(l2);
       l1=get_n_listcdr(l1);  
       l2=get_n_listcar(l1); 
       global_register_slot_type=get_n_stringvalue(l2);
       l1=get_n_listcdr(l1);  
       l2=get_n_listcar(l1); 
       global_register_slot_init_name=get_n_stringvalue(l2);
       l1=get_n_listcdr(l1);  
       l2=get_n_listcar(l1); 
       global_register_slot_work_name=get_n_stringvalue(l2);
       res=1; 
     break;
//     case 2:
//        
//     break;
  };
  return res;};

// устанавливает аргументы вызова функции
void value_set(int set)
{
  PNODE l1, l2, l3;
  switch(set){
     case 1:
       l1=make_n_long(cash_info.display_buyer_num);
       push_n_stack(get_global_stack,l1);
       l1=make_n_long(cash_info.display_buyer_lines);
       push_n_stack(get_global_stack,l1);
       l1=make_n_long(cash_info.display_casher_num);
       push_n_stack(get_global_stack,l1);
       l1=make_n_long(cash_info.display_casher_lines);
       push_n_stack(get_global_stack,l1);
       l1=make_n_long(cash_info.printer_lines);
       push_n_stack(get_global_stack,l1);
     break;
     case 2:
       l2=NIL;

       if(ecr_sale_on_pos.card_operation=='0') {
       l1=make_n_string(ecr_sale_on_pos.card_number);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.card_number);
       l2=make_n_list(l1,l2);
       l1=make_n_long(ecr_sale_on_pos.ext_field-0x30);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.receipt_number);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.casher_number);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.ecr_number);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa);
       l2=make_n_list(l1,l2);
       };
       l1=make_n_long(ecr_sale_on_pos.card_operation-0x30);
       l2=make_n_list(l1,l2);
       push_n_stack(get_global_stack,l2);
     break;
     case 3:
       l1=make_n_string(ecr_to_scales.cost);
       l2=make_n_list(l1,NIL);
       l1=make_n_long(ecr_to_scales.card_operation-0x30);
       l2=make_n_list(l1,l2);
       push_n_stack(get_global_stack,l2);
     break;
     case 4:
       l2=NIL;
       if(ecr_sale_on_pos.card_operation=='0') {
       l1=make_n_string(ecr_sale_on_pos.card_number);
       l2=make_n_list(l1,l2);
       l1=make_n_long(ecr_sale_on_pos.ext_field-0x30);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.receipt_number);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc6);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc5);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc4);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc3);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc2);
       l2=make_n_list(l1,l2);
       l1=make_n_string(ecr_sale_on_pos.summa_disc1);
       l2=make_n_list(l1,l2);
       };	
       l1=make_n_long(ecr_sale_on_pos.card_operation-0x30);
       l2=make_n_list(l1,l2);
       push_n_stack(get_global_stack,l2);
     break;
     case 5:
       l1=make_n_long(code_operation-0x30);
       l2=make_n_list(l1,NIL);
       push_n_stack(get_global_stack,l2);
     break;
  };
};

void function_start(char * f_name)
{
   PNODE l1, l2, l3;
   int res;

#ifdef _DEBUG
    printf("function_start begin \n");
#endif
    // загрузка первичных аргументов
    push_n_stack(get_global_stack,SLABEL);
    if(global_func_set_value>0){
      value_set(global_func_set_value);
      global_func_set_value=0;
    };
//    push_n_stack(get_global_stack,NIL);
    global_type_vm_func=1;
#ifdef _DEBUG
    printf("function_start %s find \n",f_name);
#endif
    l1=make_global_symbol(f_name);
    l2=get_n_envext(get_global_func,l1);
//    global_debug_code=debug;
    if(l2!=NIL) {
       if(global_type_vm_func==0){
          l3=make_n_closurefuncn(l2);
          // устанавливаем текущим
          set_n_tuplevalue(get_global_streamclosure,global_stream_closure,l3);
          load_funcarg();
       } else if (global_type_vm_func==1) {
          global_prev_func=NIL;
          global_prev_func_p=NIL;
          copy_func_to_stack(l2);
       };
#ifdef _DEBUG
    printf("function_start start command loop \n");
#endif
       global_debug_code=0;
       command_loop(0);
    } else {
#ifdef _DEBUG
    printf("function_start %s function not found \n",f_name);
#endif
    
    };

#ifdef _DEBUG
    printf("function_start end\n");
#endif
//    memdelete();
#ifndef __BORLANDC__
#ifndef __LINUX
 for(;;){};
#endif
#endif
};

